From a5aafd0b2e21ba4ee21f2c16fd3108db35f8e9bf Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Wed, 23 Jul 2014 14:52:40 +0100
Subject: [PATCH 261/333] FE: Playbackbox - ensure stereo icon takes
 precedence over mono

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/programs/mythfrontend/playbackbox.cpp |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

diff --git a/mythtv/programs/mythfrontend/playbackbox.cpp b/mythtv/programs/mythfrontend/playbackbox.cpp
index c5bdf7e..9c6c5bc 100644
--- a/mythtv/programs/mythfrontend/playbackbox.cpp
+++ b/mythtv/programs/mythfrontend/playbackbox.cpp
@@ -1156,10 +1156,11 @@ void PlaybackBox::updateIcons(const ProgramInfo *pginfo)
     }
 
     iconMap.clear();
-    iconMap["dolby"]  = AUD_DOLBY;
-    iconMap["surround"]  = AUD_SURROUND;
-    iconMap["stereo"] = AUD_STEREO;
-    iconMap["mono"] = AUD_MONO;
+    // Add prefix to ensure iteration order in case 2 or more properties set
+    iconMap["1dolby"]  = AUD_DOLBY;
+    iconMap["2surround"]  = AUD_SURROUND;
+    iconMap["3stereo"] = AUD_STEREO;
+    iconMap["4mono"] = AUD_MONO;
 
     iconState = dynamic_cast<MythUIStateType *>(GetChild("audioprops"));
     bool haveIcon = false;
@@ -1169,7 +1170,7 @@ void PlaybackBox::updateIcons(const ProgramInfo *pginfo)
         {
             if (pginfo->GetAudioProperties() & (*it))
             {
-                if (iconState->DisplayState(it.key()))
+                if (iconState->DisplayState(it.key().mid(1)))
                 {
                     haveIcon = true;
                     break;
-- 
1.7.9.5

