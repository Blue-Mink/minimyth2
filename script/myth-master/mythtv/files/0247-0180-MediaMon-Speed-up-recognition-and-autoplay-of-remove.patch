From 47f3b8e7f9dcd38cded66c7b0dbee8459676dd83 Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Mon, 11 Nov 2013 16:49:57 +0000
Subject: [PATCH 180/333] MediaMon: Speed up recognition and autoplay of
 removeable media

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
---
 mythtv/libs/libmythbase/mythcdrom-linux.cpp |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/mythtv/libs/libmythbase/mythcdrom-linux.cpp b/mythtv/libs/libmythbase/mythcdrom-linux.cpp
index 4fe472c..17ae3c3 100644
--- a/mythtv/libs/libmythbase/mythcdrom-linux.cpp
+++ b/mythtv/libs/libmythbase/mythcdrom-linux.cpp
@@ -516,7 +516,9 @@ MythMediaStatus MythCDROMLinux::checkMedia()
             return setStatus(MEDIASTAT_UNKNOWN, OpenedHere);
     }
 
-    if (mediaChanged())
+    // NB must call mediaChanged before testing m_Status otherwise will get
+    // an unwanted mediaChanged on next pass
+    if (mediaChanged() && m_Status != MEDIASTAT_UNKNOWN)
     {
         LOG(VB_MEDIA, LOG_INFO, m_DevicePath + " Media changed");
         // Regardless of the actual status lie here and say
-- 
1.7.9.5

