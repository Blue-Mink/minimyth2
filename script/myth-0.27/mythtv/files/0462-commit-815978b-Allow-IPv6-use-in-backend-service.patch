From 815978b64ad065884782123b3ffe098cd4cb075a Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Sat, 7 Jun 2014 23:45:09 +1000
Subject: [PATCH] Allow IPv6 use in backend service

(cherry picked from commit 574b2d376d69d2fcd1245fbe2ba40fe02ce08c80)
---
 mythtv/programs/mythbackend/services/myth.cpp |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/mythtv/programs/mythbackend/services/myth.cpp b/mythtv/programs/mythbackend/services/myth.cpp
index dc43e6a..70abead 100644
--- a/mythtv/programs/mythbackend/services/myth.cpp
+++ b/mythtv/programs/mythbackend/services/myth.cpp
@@ -63,11 +63,11 @@ DTC::ConnectionInfo* Myth::GetConnectionInfo( const QString  &sPin )
     // Check for DBHostName of "localhost" and change to public name or IP
     // ----------------------------------------------------------------------
 
-    QString sServerIP = gCoreContext->GetSetting( "BackendServerIP", "localhost" );
+    QString sServerIP = gCoreContext->GetBackendServerIP();
     //QString sPeerIP   = pRequest->GetPeerAddress();
 
     if ((params.dbHostName == "localhost") &&
-        (sServerIP         != "localhost"))  // &&
+        !sServerIP.isEmpty())  // &&
         //(sServerIP         != sPeerIP    ))
     {
         params.dbHostName = sServerIP;
-- 
1.7.10.2

