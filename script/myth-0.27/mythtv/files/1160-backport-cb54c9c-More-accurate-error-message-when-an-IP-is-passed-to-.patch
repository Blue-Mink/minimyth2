From cb54c9ce9bac3813a05a63601b4ee0b1f07e518c Mon Sep 17 00:00:00 2001
From: Stuart Morgan <smorgan@mythtv.org>
Date: Thu, 4 Sep 2014 19:28:29 +0100
Subject: [PATCH 10/11] More accurate error message when an IP is passed to
 GetBackendServerIP() instead of a hostname

---
 mythtv/libs/libmythbase/mythcorecontext.cpp |    8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/mythtv/libs/libmythbase/mythcorecontext.cpp b/mythtv/libs/libmythbase/mythcorecontext.cpp
index a0dfe20..d4a051e 100644
--- a/mythtv/libs/libmythbase/mythcorecontext.cpp
+++ b/mythtv/libs/libmythbase/mythcorecontext.cpp
@@ -927,6 +927,14 @@ QString MythCoreContext::GetBackendServerIP(void)
  */
 QString MythCoreContext::GetBackendServerIP(const QString &host)
 {
+    if (!QHostAddress(host).isNull())
+    {
+        LOG(VB_GENERAL, LOG_ERR, QString("GetBackendServerIP(%1): Given "
+                                         "IP address instead of hostname "
+                                         "(ID)").arg(host));
+        return host;
+    }
+
     QString addr4, addr6;
 #if !defined(QT_NO_IPV6)
     if (!ServerPool::DefaultListenIPv6().isEmpty())
-- 
1.7.10.2

