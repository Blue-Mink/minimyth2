From 819f4239a07794063319f81cd722004708e77e4e Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Sun, 13 Jul 2014 23:27:22 +1000
Subject: [PATCH 1/2] CoreContext: Fix IsThisHost
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

IsThisHost can be called with a hostname, and not just an address as the argumentsâ€™ name suggest

(cherry picked from commit feb2ddd5ff2ca37efdd05257ee8b725b25f6a183)
---
 mythtv/libs/libmythbase/mythcorecontext.cpp |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/mythtv/libs/libmythbase/mythcorecontext.cpp b/mythtv/libs/libmythbase/mythcorecontext.cpp
index 1854aa5..c4e3c68 100644
--- a/mythtv/libs/libmythbase/mythcorecontext.cpp
+++ b/mythtv/libs/libmythbase/mythcorecontext.cpp
@@ -643,7 +643,7 @@ bool MythCoreContext::IsThisHost(const QString &addr, const QString &host)
     QString thisip  = GetBackendServerIP4(host);
     QString thisip6 = GetBackendServerIP6(host);
 
-    return ((addrstr == thisip) || (!thisip6.isEmpty() && addrstr == thisip6));
+    return (!addrfix.isNull() && (addrstr == thisip) || (addrstr == thisip6));
 }
 
 bool MythCoreContext::IsFrontendOnly(void)
-- 
1.7.10.2

