From da2ed23fc493a5b28c545bdc5a71fc178aa01ba6 Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Thu, 22 May 2014 02:39:08 +1000
Subject: [PATCH 10/17] Fix memory leak

---
 mythtv/libs/libmythui/mythrender_vdpau.cpp |   11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/mythtv/libs/libmythui/mythrender_vdpau.cpp b/mythtv/libs/libmythui/mythrender_vdpau.cpp
index cc389c9..4a39df3 100644
--- a/mythtv/libs/libmythui/mythrender_vdpau.cpp
+++ b/mythtv/libs/libmythui/mythrender_vdpau.cpp
@@ -317,12 +317,11 @@ bool MythRenderVDPAU::IsMPEG4Available(void)
 
     LOG(VB_PLAYBACK, LOG_INFO, LOC + "Checking VDPAU capabilities.");
     MythRenderVDPAU *dummy = new MythRenderVDPAU();
-    if (dummy)
-    {
-        if (dummy->CreateDummy())
-            return gVDPAUMPEG4Accel;
-        delete dummy;
-    }
+    bool ok = dummy->CreateDummy();
+    delete dummy;
+
+    if (ok)
+        return gVDPAUMPEG4Accel;
 
     return false;
 }
-- 
1.7.10.2

