From 67b7ebb3d11b23677bebc7efdc13d2b9c37a57de Mon Sep 17 00:00:00 2001
From: Lawrence Rust <lvr@softsystem.co.uk>
Date: Mon, 15 Jul 2013 10:06:54 +0100
Subject: [PATCH 31/56] AO: SetStretchFactor sets pause until buffered to
 smooth playback start

Signed-off-by: Lawrence Rust <lvr@softsystem.co.uk>
Signed-off-by: Jean-Yves Avenard <jyavenard@mythtv.org>
---
 mythtv/libs/libmyth/audio/audiooutputbase.cpp |    5 +++++
 1 file changed, 5 insertions(+)

diff --git a/mythtv/libs/libmyth/audio/audiooutputbase.cpp b/mythtv/libs/libmyth/audio/audiooutputbase.cpp
index 9ee42c4..1cd74b4 100644
--- a/mythtv/libs/libmyth/audio/audiooutputbase.cpp
+++ b/mythtv/libs/libmyth/audio/audiooutputbase.cpp
@@ -367,8 +367,13 @@ void AudioOutputBase::SetStretchFactorLocked(float lstretchfactor)
             m_previousbpf = bytes_per_frame;
             bytes_per_frame = source_channels *
                               AudioOutputSettings::SampleSize(FORMAT_FLT);
+            audbuf_timecode = audiotime = frames_buffered = 0;
             waud = raud = 0;
             reset_active.Ref();
+            was_paused = pauseaudio;
+            pauseaudio = true;
+            actually_paused = false;
+            unpause_when_ready = true;
         }
     }
 }
-- 
1.7.10.2

