From 2d73bf8562dc5735a47fb17c84ff214871c2cba6 Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Wed, 4 Jun 2014 00:55:04 +1000
Subject: [PATCH 07/16] =?UTF-8?q?Add=20search=20for=20=E2=80=9Cjpeg=E2=80=9D?=
 =?UTF-8?q?=20type,=20and=20make=20search=20for=20image=20case=20insensitive?=
 =?UTF-8?q?.?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Note: That entire code should be re-written
---
 mythtv/programs/mythfrontend/videodlg.cpp |    7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/mythtv/programs/mythfrontend/videodlg.cpp b/mythtv/programs/mythfrontend/videodlg.cpp
index ee344a0..e0009d0 100644
--- a/mythtv/programs/mythfrontend/videodlg.cpp
+++ b/mythtv/programs/mythfrontend/videodlg.cpp
@@ -1440,6 +1440,7 @@ QString VideoDialog::GetImageFromFolder(VideoMetadata *metadata)
     QStringList test_files;
     test_files.append(filename + ".png");
     test_files.append(filename + ".jpg");
+    test_files.append(filename + ".jpeg");
     test_files.append(filename + ".gif");
     bool foundCover;
 
@@ -1479,9 +1480,11 @@ QString VideoDialog::GetImageFromFolder(VideoMetadata *metadata)
         QStringList imageTypes;
         imageTypes.append(metadata->GetTitle() + ".png");
         imageTypes.append(metadata->GetTitle() + ".jpg");
+        imageTypes.append(metadata->GetTitle() + ".jpeg");
         imageTypes.append(metadata->GetTitle() + ".gif");
         imageTypes.append("*.png");
         imageTypes.append("*.jpg");
+        imageTypes.append("*.jpeg");
         imageTypes.append("*.gif");
 
         QStringList fList;
@@ -1513,6 +1516,7 @@ QString VideoDialog::GetImageFromFolder(VideoMetadata *metadata)
                         {
                             QRegExp rx(*pattern);
                             rx.setPatternSyntax(QRegExp::Wildcard);
+                            rx.setCaseSensitivity(Qt::CaseInsensitive);
                             QStringList matches = tmpList.filter(rx);
                             if (!matches.isEmpty())
                             {
@@ -1590,6 +1594,7 @@ QString VideoDialog::GetCoverImage(MythGenericTree *node)
         QStringList test_files;
         test_files.append(filename + ".png");
         test_files.append(filename + ".jpg");
+        test_files.append(filename + ".jpeg");
         test_files.append(filename + ".gif");
         bool foundCover;
 
@@ -1632,6 +1637,7 @@ QString VideoDialog::GetCoverImage(MythGenericTree *node)
             QStringList imageTypes;
             imageTypes.append("*.png");
             imageTypes.append("*.jpg");
+            imageTypes.append("*.jpeg");
             imageTypes.append("*.gif");
 
             QStringList fList;
@@ -1664,6 +1670,7 @@ QString VideoDialog::GetCoverImage(MythGenericTree *node)
                             {
                                 QRegExp rx(*pattern);
                                 rx.setPatternSyntax(QRegExp::Wildcard);
+                                rx.setCaseSensitivity(Qt::CaseInsensitive);
                                 QStringList matches = tmpList.filter(rx);
                                 if (!matches.isEmpty())
                                 {
-- 
1.7.10.2

