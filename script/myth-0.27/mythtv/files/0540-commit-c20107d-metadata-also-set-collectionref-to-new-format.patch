From c20107d36030158d910df1a959a3ca270f6794f0 Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Tue, 15 Jul 2014 16:09:33 +1000
Subject: [PATCH] metadata: also set collectionref to new format

(cherry picked from commit 79aea142fc0d23c25a0f79085cf7df0adfb87e07)
---
 mythtv/libs/libmythmetadata/metadatagrabber.cpp |    5 +++++
 1 file changed, 5 insertions(+)

diff --git a/mythtv/libs/libmythmetadata/metadatagrabber.cpp b/mythtv/libs/libmythmetadata/metadatagrabber.cpp
index ff5a304..130645d 100644
--- a/mythtv/libs/libmythmetadata/metadatagrabber.cpp
+++ b/mythtv/libs/libmythmetadata/metadatagrabber.cpp
@@ -460,6 +460,11 @@ MetadataLookupList MetaGrabberScript::RunGrabber(const QStringList &args,
             MetadataLookup *tmp = ParseMetadataItem(item, lookup, passseas);
             tmp->SetInetref(QString("%1_%2").arg(m_command)
                                             .arg(tmp->GetInetref()));
+            if (!tmp->GetCollectionref().isEmpty())
+            {
+                tmp->SetCollectionref(QString("%1_%2").arg(m_command)
+                                .arg(tmp->GetCollectionref()));
+            }
             list.append(tmp);
             // MetadataLookup is to be owned by the list
             tmp->DecrRef();
-- 
1.7.10.2

