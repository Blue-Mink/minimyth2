From 87822fee1513fa7eaa0ed608b3d514b98fe05e0e Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Fri, 18 Jul 2014 03:34:31 +1000
Subject: [PATCH 3/3] protoserver: fixes QUERY_FILE_HASH hanging

same as 7fa5c4fe97cf27dae4bee3f0d1b96ca1940f6f68
---
 mythtv/libs/libmythprotoserver/requesthandler/fileserverhandler.cpp |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/mythtv/libs/libmythprotoserver/requesthandler/fileserverhandler.cpp b/mythtv/libs/libmythprotoserver/requesthandler/fileserverhandler.cpp
index b75fdcb..82aa6ae 100644
--- a/mythtv/libs/libmythprotoserver/requesthandler/fileserverhandler.cpp
+++ b/mythtv/libs/libmythprotoserver/requesthandler/fileserverhandler.cpp
@@ -665,7 +665,7 @@ bool FileServerHandler::HandleQueryFileHash(SocketHandler *socket,
 
     QString hash = "";
 
-    if (hostname == gCoreContext->GetHostName())
+    if (gCoreContext->IsThisHost(hostname))
     {
         // looking for file on me, return directly
         StorageGroup sgroup(storageGroup, gCoreContext->GetHostName());
-- 
1.7.10.2

