From 1fb7b5e42e758da25b6287606a9ed0171c7f8584 Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Sun, 10 Aug 2014 21:35:25 +1000
Subject: [PATCH] Fix GetLiveTVIndex

bad copy paste
---
 mythtv/libs/libmythtv/tv_play.cpp |    7 ++++---
 mythtv/libs/libmythtv/tv_play.h   |    2 +-
 2 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/mythtv/libs/libmythtv/tv_play.cpp b/mythtv/libs/libmythtv/tv_play.cpp
index c400ad4..8db7f84 100644
--- a/mythtv/libs/libmythtv/tv_play.cpp
+++ b/mythtv/libs/libmythtv/tv_play.cpp
@@ -7927,7 +7927,7 @@ void TV::ToggleOSD(PlayerContext *ctx, bool includeStatusOSD)
         osdInfo info;
         if (ctx->CalcPlayerSliderPosition(info))
         {
-            info.text["title"] = (paused ? tr("Paused") : tr("Position")) + GetLiveTVIndex();
+            info.text["title"] = (paused ? tr("Paused") : tr("Position")) + GetLiveTVIndex(ctx);
             UpdateOSDStatus(ctx, info, kOSDFunctionalType_Default,
                             paused ? kOSDTimeout_None : kOSDTimeout_Med);
             SetUpdateOSDPosition(true);
@@ -8047,7 +8047,7 @@ void TV::UpdateOSDSeekMessage(const PlayerContext *ctx,
     {
         int osdtype = (doSmartForward) ? kOSDFunctionalType_SmartForward :
             kOSDFunctionalType_Default;
-        info.text["title"] = mesg + GetLiveTVIndex();
+        info.text["title"] = mesg + GetLiveTVIndex(ctx);
         UpdateOSDStatus(ctx, info, osdtype, timeout);
         SetUpdateOSDPosition(true);
     }
@@ -13578,7 +13578,7 @@ void TV::ReturnPlayerLock(const PlayerContext *&ctx) const
     ctx = NULL;
 }
 
-QString TV::GetLiveTVIndex(void) const
+QString TV::GetLiveTVIndex(const PlayerContext *ctx) const
 {
 #ifdef DEBUG_LIVETV_TRANSITION
     return (ctx->tvchain ?
@@ -13586,6 +13586,7 @@ QString TV::GetLiveTVIndex(void) const
                 .arg(ctx->tvchain->GetCurPos())
                 .arg(ctx->tvchain->TotalSize()) : QString());
 #else
+    (void)ctx;
     return QString();
 #endif
 }
diff --git a/mythtv/libs/libmythtv/tv_play.h b/mythtv/libs/libmythtv/tv_play.h
index faac23d..8494f6d 100644
--- a/mythtv/libs/libmythtv/tv_play.h
+++ b/mythtv/libs/libmythtv/tv_play.h
@@ -776,7 +776,7 @@ class MTV_PUBLIC TV : public QObject, public MenuItemDisplayer
 
     // for temp debugging only..
     int find_player_index(const PlayerContext*) const;
-    QString GetLiveTVIndex(void) const;
+    QString GetLiveTVIndex(const PlayerContext*) const;
 
   private:
     // Configuration variables from database
-- 
1.7.10.2

