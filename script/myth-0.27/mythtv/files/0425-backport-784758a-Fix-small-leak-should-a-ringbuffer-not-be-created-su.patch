From 784758aa23213db029b2086271421cb2bea2e9e5 Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Thu, 19 Jun 2014 01:10:45 +1000
Subject: [PATCH 05/10] Fix small leak should a ringbuffer not be created
 successfully.

---
 mythtv/libs/libmythtv/tv_rec.cpp |    1 +
 1 file changed, 1 insertion(+)

diff --git a/mythtv/libs/libmythtv/tv_rec.cpp b/mythtv/libs/libmythtv/tv_rec.cpp
index 778f36d..dcf4427 100644
--- a/mythtv/libs/libmythtv/tv_rec.cpp
+++ b/mythtv/libs/libmythtv/tv_rec.cpp
@@ -4677,6 +4677,7 @@ RecordingInfo *TVRec::SwitchRecordingRingBuffer(const RecordingInfo &rcinfo)
     RingBuffer *rb = RingBuffer::Create(ri->GetPathname(), write);
     if (!rb->IsOpen())
     {
+        delete rb;
         ri->SetRecordingStatus(rsFailed);
         FinishedRecording(ri, NULL);
         ri->MarkAsInUse(false, kRecorderInUseID);
-- 
1.7.10.2

