From e5d6a425053e2c6ce747cf8adfd7aaddf4bcb97a Mon Sep 17 00:00:00 2001
From: Stuart Morgan <smorgan@mythtv.org>
Date: Sun, 7 Sep 2014 12:31:56 +0100
Subject: [PATCH 2/7] MythMusic: Fix sql error in SmartPlaylist editor when
 adding a new playlist.

---
 mythplugins/mythmusic/mythmusic/smartplaylist.cpp |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/mythplugins/mythmusic/mythmusic/smartplaylist.cpp b/mythplugins/mythmusic/mythmusic/smartplaylist.cpp
index c436c61..c54f9b5 100644
--- a/mythplugins/mythmusic/mythmusic/smartplaylist.cpp
+++ b/mythplugins/mythmusic/mythmusic/smartplaylist.cpp
@@ -1013,6 +1013,9 @@ QString SmartPlaylistEditor::getOrderByClause(void)
 
 QString SmartPlaylistEditor::getWhereClause(void)
 {
+    if (m_criteriaRows.size() == 0)
+        return QString();
+
     bool bFirst = true;
     QString sql = "WHERE ";
 
-- 
1.7.10.2

