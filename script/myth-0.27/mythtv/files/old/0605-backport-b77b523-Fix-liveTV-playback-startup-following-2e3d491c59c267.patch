From b77b523fa0450798e4534c0d7ae65cbef6ed2f8f Mon Sep 17 00:00:00 2001
From: Jean-Yves Avenard <jyavenard@mythtv.org>
Date: Fri, 11 Apr 2014 07:21:16 +0700
Subject: [PATCH 2/2] Fix liveTV playback startup following
 2e3d491c59c267539f82d49fc43a75831656ab

---
 mythtv/libs/libmythtv/avformatdecoder.cpp |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

diff --git a/mythtv/libs/libmythtv/avformatdecoder.cpp b/mythtv/libs/libmythtv/avformatdecoder.cpp
index f1e3f15..118a2d0 100644
--- a/mythtv/libs/libmythtv/avformatdecoder.cpp
+++ b/mythtv/libs/libmythtv/avformatdecoder.cpp
@@ -1090,15 +1090,12 @@ int AvFormatDecoder::OpenFile(RingBuffer *rbuffer, bool novideo,
             }
         }
 
-        if (!found)
-        {
-            avfRingBuffer->SetInInit(false);
-        }
+        avfRingBuffer->SetInInit(false);
 
         scanned = found;
     }
 
-    // If we haven't been opened to open the file so far, revert to old method
+    // If we haven't opened the file so far, revert to old method
     while (!found)
     {
         ic = avformat_alloc_context();
@@ -1141,7 +1138,6 @@ int AvFormatDecoder::OpenFile(RingBuffer *rbuffer, bool novideo,
     if (!scanned)
     {
         int ret = FindStreamInfo();
-        avfRingBuffer->SetInInit(false);
         if (ret < 0)
         {
             LOG(VB_GENERAL, LOG_ERR, LOC + "Could not find codec parameters. " +
@@ -1151,6 +1147,7 @@ int AvFormatDecoder::OpenFile(RingBuffer *rbuffer, bool novideo,
             return -1;
         }
     }
+
     ic->streams_changed = HandleStreamChange;
     if (ringBuffer->IsDVD())
         ic->streams_changed = HandleDVDStreamChange;
-- 
1.7.10.2

