From bc5a02dedb4cbbaad6928436c20528a8c2391945 Mon Sep 17 00:00:00 2001
From: Stuart Morgan <smorgan@mythtv.org>
Date: Tue, 15 Jul 2014 13:18:36 +0100
Subject: [PATCH 3/6] UPnP: Have the video extension create movieGenre
 containers

---
 mythtv/programs/mythbackend/upnpcdsvideo.cpp |   13 +++++++++++++
 mythtv/programs/mythbackend/upnpcdsvideo.h   |    4 ++++
 2 files changed, 17 insertions(+)

diff --git a/mythtv/programs/mythbackend/upnpcdsvideo.cpp b/mythtv/programs/mythbackend/upnpcdsvideo.cpp
index f612af2..6fe7466 100644
--- a/mythtv/programs/mythbackend/upnpcdsvideo.cpp
+++ b/mythtv/programs/mythbackend/upnpcdsvideo.cpp
@@ -625,3 +625,16 @@ void UPnpCDSVideo::AddItem( const UPnpCDSRequest    *pRequest,
 
     pRes->AddAttribute( "duration"  , sDur      );
 }
+
+CDSObject* UPnpCDSVideo::CreateContainer(const QString& sId, const QString& sTitle, const QString& sParentId, const QString& sClass)
+{
+    CDSObject *pContainer = NULL;
+    if (sClass == "object.container.person.movieGenre")
+    {
+        pContainer = CDSObject::CreateMovieGenre(sId, sTitle, m_sExtensionId );
+    }
+    else
+        pContainer = UPnpCDSExtension::CreateContainer(sId, sTitle, sParentId, sClass);
+
+    return pContainer;
+}
diff --git a/mythtv/programs/mythbackend/upnpcdsvideo.h b/mythtv/programs/mythbackend/upnpcdsvideo.h
index 98e8601..7984bf0 100644
--- a/mythtv/programs/mythbackend/upnpcdsvideo.h
+++ b/mythtv/programs/mythbackend/upnpcdsvideo.h
@@ -49,6 +49,10 @@ class UPnpCDSVideo : public UPnpCDSExtension
                                           bool                     bAddRef, 
                                           MSqlQuery               &query );
 
+        virtual CDSObject       *CreateContainer( const QString &sId,
+                                                  const QString &sTitle,
+                                                  const QString &sParentId,
+                                                  const QString &sClass );
     public:
 
         UPnpCDSVideo( ) : UPnpCDSExtension( "Videos", "Videos",
-- 
1.7.10.2

