From c889cbd348f211147112efffc44a548044b9ad54 Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Tue, 11 Mar 2014 09:17:05 +0000
Subject: [PATCH 06/13] mythutil - ExtractImage: Always update the image even
 if one already exists

---
 mythtv/programs/mythutil/musicmetautils.cpp |   21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

diff --git a/mythtv/programs/mythutil/musicmetautils.cpp b/mythtv/programs/mythutil/musicmetautils.cpp
index 1e2f973..27d1a82 100644
--- a/mythtv/programs/mythutil/musicmetautils.cpp
+++ b/mythtv/programs/mythutil/musicmetautils.cpp
@@ -152,17 +152,18 @@ static int ExtractImage(const MythUtilCommandLineParser &cmdline)
     QDir dir(path);
 
     QString filename = QString("%1-%2.jpg").arg(mdata->ID()).arg(AlbumArtImages::getTypeFilename(image->imageType));
-    if (!QFile::exists(path + filename))
-    {
-        if (!dir.exists())
-            dir.mkpath(path);
 
-        QImage *saveImage = tagger->getAlbumArt(trackFilename, image->imageType);
-        if (saveImage)
-        {
-            saveImage->save(path + filename, "JPEG");
-            delete saveImage;
-        }
+    if (QFile::exists(path + filename))
+        QFile::remove(path + filename);
+
+    if (!dir.exists())
+        dir.mkpath(path);
+
+    QImage *saveImage = tagger->getAlbumArt(trackFilename, image->imageType);
+    if (saveImage)
+    {
+        saveImage->save(path + filename, "JPEG");
+        delete saveImage;
     }
 
     delete tagger;
-- 
1.7.10.2

