From d84e590c0dc834459cfdb808c6c2f1d31c7c97c9 Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Sun, 16 Mar 2014 23:42:52 +0000
Subject: [PATCH 06/11] Fix leak in ScanMusic if no directories found. Fixes
 Coverity ID #1192758

---
 mythtv/programs/mythutil/musicmetautils.cpp |    1 +
 1 file changed, 1 insertion(+)

diff --git a/mythtv/programs/mythutil/musicmetautils.cpp b/mythtv/programs/mythutil/musicmetautils.cpp
index 1c3941e..7b3dfb0 100644
--- a/mythtv/programs/mythutil/musicmetautils.cpp
+++ b/mythtv/programs/mythutil/musicmetautils.cpp
@@ -183,6 +183,7 @@ static int ScanMusic(const MythUtilCommandLineParser &cmdline)
     if (!StorageGroup::FindDirs("Music", gCoreContext->GetHostName(), &dirList))
     {
         LOG(VB_GENERAL, LOG_ERR, "Failed to find any directories in the 'Music' storage group");
+        delete fscan;
         return GENERIC_EXIT_NOT_OK;
     }
 
-- 
1.7.10.2

