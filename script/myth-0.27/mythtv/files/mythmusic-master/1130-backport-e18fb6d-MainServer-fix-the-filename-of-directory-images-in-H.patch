From e18fb6d7a0ecb6117877368e832f7e51e6ecb26e Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Wed, 2 Apr 2014 15:10:07 +0100
Subject: [PATCH 10/10] MainServer: fix the filename of directory images in
 HandleMusicFindAlbumArt

---
 mythtv/programs/mythbackend/mainserver.cpp |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/mythtv/programs/mythbackend/mainserver.cpp b/mythtv/programs/mythbackend/mainserver.cpp
index 053fa58..eca922e 100644
--- a/mythtv/programs/mythbackend/mainserver.cpp
+++ b/mythtv/programs/mythbackend/mainserver.cpp
@@ -5615,11 +5615,14 @@ void MainServer::HandleMusicFindAlbumArt(const QStringList &slist, PlaybackSock
         // create an empty image list
         AlbumArtImages *images = new AlbumArtImages(mdata, false);
 
+        fi.setFile(mdata->Filename(false));
+        QString startDir = fi.path();
+
         for (int x = 0; x < files.size(); x++)
         {
             fi.setFile(files.at(x));
             AlbumArtImage *image = new AlbumArtImage();
-            image->filename = fi.fileName();
+            image->filename = startDir + '/' + fi.fileName();
             image->hostname = gCoreContext->GetHostName();
             image->embedded = false;
             image->imageType = AlbumArtImages::guessImageType(image->filename);
@@ -5628,7 +5631,7 @@ void MainServer::HandleMusicFindAlbumArt(const QStringList &slist, PlaybackSock
             delete image;
         }
 
-        // find any embedded albumart in the the tracks tag
+        // find any embedded albumart in the tracks tag
         MetaIO *tagger = mdata->getTagger();
         if (tagger)
         {
-- 
1.7.10.2

