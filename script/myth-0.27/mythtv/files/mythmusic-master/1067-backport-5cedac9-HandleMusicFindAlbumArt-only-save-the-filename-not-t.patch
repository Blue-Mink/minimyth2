From 5cedac94c64b334ce127bdbdb18644a08a88d74a Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Sun, 16 Feb 2014 22:20:50 +0000
Subject: [PATCH 2/6] HandleMusicFindAlbumArt: only save the filename not the
 full path

---
 mythtv/programs/mythbackend/mainserver.cpp |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/mythtv/programs/mythbackend/mainserver.cpp b/mythtv/programs/mythbackend/mainserver.cpp
index 26c75df..f62e608 100644
--- a/mythtv/programs/mythbackend/mainserver.cpp
+++ b/mythtv/programs/mythbackend/mainserver.cpp
@@ -5479,8 +5479,9 @@ void MainServer::HandleMusicFindAlbumArt(const QStringList &slist, PlaybackSock
 
         for (int x = 0; x < files.size(); x++)
         {
+            fi.setFile(files.at(x));
             AlbumArtImage *image = new AlbumArtImage();
-            image->filename = dir.absolutePath() + '/' + files.at(x);
+            image->filename = fi.fileName();
             image->hostname = gCoreContext->GetHostName();
             image->embedded = false;
             image->imageType = AlbumArtImages::guessImageType(image->filename);
-- 
1.7.10

