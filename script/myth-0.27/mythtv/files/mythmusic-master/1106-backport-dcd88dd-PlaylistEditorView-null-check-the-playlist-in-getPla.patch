From dcd88ddd3db4a35f41fa0fe7cc844a0341b0c761 Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Wed, 19 Mar 2014 16:43:41 +0000
Subject: [PATCH 11/16] PlaylistEditorView: null check the playlist in
 getPlaylistTracks

Fixes Coverity ID #1164500
---
 .../mythmusic/mythmusic/playlisteditorview.cpp      |   19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)

diff --git a/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp b/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
index ea5d853..df5a60e 100644
--- a/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
+++ b/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
@@ -1616,16 +1616,19 @@ void PlaylistEditorView::getPlaylistTracks(MusicGenericTree *node, int playlistI
 {
     Playlist *playlist = gMusicData->all_playlists->getPlaylist(playlistID);
 
-    for (int x = 0; x < playlist->getTrackCount(); x++)
+    if (playlist)
     {
-        MusicMetadata *mdata = playlist->getSongAt(x);
-        if (mdata)
+        for (int x = 0; x < playlist->getTrackCount(); x++)
         {
-            MusicGenericTree *newnode = new MusicGenericTree(node, mdata->Title(), "trackid");
-            newnode->setInt(mdata->ID());
-            newnode->setDrawArrow(false);
-            bool hasTrack = gPlayer->getCurrentPlaylist() ? gPlayer->getCurrentPlaylist()->checkTrack(mdata->ID()) : false;
-            newnode->setCheck(hasTrack ? MythUIButtonListItem::FullChecked : MythUIButtonListItem::NotChecked);
+            MusicMetadata *mdata = playlist->getSongAt(x);
+            if (mdata)
+            {
+                MusicGenericTree *newnode = new MusicGenericTree(node, mdata->Title(), "trackid");
+                newnode->setInt(mdata->ID());
+                newnode->setDrawArrow(false);
+                bool hasTrack = gPlayer->getCurrentPlaylist() ? gPlayer->getCurrentPlaylist()->checkTrack(mdata->ID()) : false;
+                newnode->setCheck(hasTrack ? MythUIButtonListItem::FullChecked : MythUIButtonListItem::NotChecked);
+            }
         }
     }
 
-- 
1.7.10.2

