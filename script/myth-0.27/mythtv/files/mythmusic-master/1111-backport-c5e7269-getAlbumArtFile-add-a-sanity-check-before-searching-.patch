From c5e72693ee8a625bff0f363f02556f3157682200 Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Sun, 23 Mar 2014 14:10:32 +0000
Subject: [PATCH 7/8] getAlbumArtFile: add a sanity check before searching for
 the image

---
 mythtv/libs/libmythmetadata/musicmetadata.cpp |    6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/mythtv/libs/libmythmetadata/musicmetadata.cpp b/mythtv/libs/libmythmetadata/musicmetadata.cpp
index f0478ca..565a1c5 100644
--- a/mythtv/libs/libmythmetadata/musicmetadata.cpp
+++ b/mythtv/libs/libmythmetadata/musicmetadata.cpp
@@ -1085,6 +1085,12 @@ QString MusicMetadata::getAlbumArtFile(void)
         {
             // check for the image in the storage group
             QUrl url(res);
+
+            if (url.path().isEmpty() || url.host().isEmpty() || url.userName().isEmpty())
+            {
+                return QString("");
+            }
+
             QString sUrl = RemoteFile::FindFile(url.path(), url.host(), url.userName());
 
             if (sUrl.isEmpty())
-- 
1.7.10.2

