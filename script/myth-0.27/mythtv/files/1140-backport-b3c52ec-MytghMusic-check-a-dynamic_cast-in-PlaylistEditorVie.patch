From b3c52ec2daa7eb968150b834fedb25a769fe8be9 Mon Sep 17 00:00:00 2001
From: Paul Harrison <pharrison@mythtv.org>
Date: Sun, 6 Jul 2014 18:45:15 +0100
Subject: [PATCH] MytghMusic: check a dynamic_cast in
 PlaylistEditorView::ShowMenu()

Fixes Coverity ID 1213715 Unchecked dynamic_cast
---
 .../mythmusic/mythmusic/playlisteditorview.cpp     |   39 +++++++++++---------
 1 file changed, 21 insertions(+), 18 deletions(-)

diff --git a/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp b/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
index 4151b49..c133a11 100644
--- a/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
+++ b/mythplugins/mythmusic/mythmusic/playlisteditorview.cpp
@@ -630,26 +630,29 @@ void PlaylistEditorView::ShowMenu(void)
         MythMenu *menu = NULL;
         MusicGenericTree *mnode = dynamic_cast<MusicGenericTree*>(m_playlistTree->GetCurrentNode());
 
-        if (mnode->getAction() == "smartplaylists" ||
-            mnode->getAction() == "smartplaylistcategory" ||
-            mnode->getAction() == "smartplaylist")
-        {
-            menu = createSmartPlaylistMenu();
-        }
-        else if (mnode->getAction() == "playlists" ||
-                 mnode->getAction() == "playlist")
-        {
-            menu = createPlaylistMenu();
-        }
-        else if (mnode->getAction() == "trackid")
-        {
-        }
-        else
+        if (mnode)
         {
-            menu = createPlaylistOptionsMenu();
-        }
+            if (mnode->getAction() == "smartplaylists" ||
+                mnode->getAction() == "smartplaylistcategory" ||
+                mnode->getAction() == "smartplaylist")
+            {
+                menu = createSmartPlaylistMenu();
+            }
+            else if (mnode->getAction() == "playlists" ||
+                        mnode->getAction() == "playlist")
+            {
+                menu = createPlaylistMenu();
+            }
+            else if (mnode->getAction() == "trackid")
+            {
+            }
+            else
+            {
+                menu = createPlaylistOptionsMenu();
+            }
 
-        updateSonglist(mnode);
+            updateSonglist(mnode);
+        }
 
         if (menu)
         {
-- 
1.7.10.2

