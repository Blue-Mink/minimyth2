diff -Naur NVIDIA-Linux-x86_64-340.65-old/kernel/nv-drm.c NVIDIA-Linux-x86_64-340.65-new/kernel/nv-drm.c
--- NVIDIA-Linux-x86_64-340.65-old/kernel/nv-drm.c	2014-12-02 17:45:35.000000000 +0100
+++ NVIDIA-Linux-x86_64-340.65-new/kernel/nv-drm.c	2015-01-22 19:06:53.175688743 +0100
@@ -128,6 +128,10 @@
     .gem_prime_vmap = nv_gem_prime_vmap,
     .gem_prime_vunmap = nv_gem_prime_vunmap,
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 18, 0)
+    .set_busid = drm_pci_set_busid,
+#endif
+
     .name = "nvidia-drm",
     .desc = "NVIDIA DRM driver",
     .date = "20130102",
diff -Naur NVIDIA-Linux-x86_64-340.65-old/kernel/nv-frontend.c NVIDIA-Linux-x86_64-340.65-new/kernel/nv-frontend.c
--- NVIDIA-Linux-x86_64-340.65-old/kernel/nv-frontend.c	2014-12-02 17:45:36.000000000 +0100
+++ NVIDIA-Linux-x86_64-340.65-new/kernel/nv-frontend.c	2015-01-22 19:06:53.175688743 +0100
@@ -327,7 +327,7 @@
     unsigned long i_arg
 )
 {
-    return nvidia_frontend_ioctl(file->f_dentry->d_inode, file, cmd, i_arg);
+    return nvidia_frontend_ioctl(file->f_path.dentry->d_inode, file, cmd, i_arg);
 }
 
 long nvidia_frontend_compat_ioctl(
@@ -336,7 +336,7 @@
     unsigned long i_arg
 )
 {
-    return nvidia_frontend_ioctl(file->f_dentry->d_inode, file, cmd, i_arg);
+    return nvidia_frontend_ioctl(file->f_path.dentry->d_inode, file, cmd, i_arg);
 }
 
 int nvidia_frontend_mmap(
diff -Naur NVIDIA-Linux-x86_64-340.65-old/kernel/nv.c NVIDIA-Linux-x86_64-340.65-new/kernel/nv.c
--- NVIDIA-Linux-x86_64-340.65-old/kernel/nv.c	2014-12-02 17:45:35.000000000 +0100
+++ NVIDIA-Linux-x86_64-340.65-new/kernel/nv.c	2015-01-22 19:06:53.175688743 +0100
@@ -1839,7 +1839,7 @@
     unsigned long i_arg
 )
 {
-    return nvidia_ioctl(file->f_dentry->d_inode, file, cmd, i_arg);
+    return nvidia_ioctl(file->f_path.dentry->d_inode, file, cmd, i_arg);
 }
 
 /*
