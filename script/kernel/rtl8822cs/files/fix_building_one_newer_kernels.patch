From 7549872ef7175da8fb1cadc2428378d06dc53188 Mon Sep 17 00:00:00 2001
From: chewitt <christianshewitt@gmail.com>
Date: Fri, 30 Oct 2020 12:49:25 +0000
Subject: [PATCH] fix build issues on Linux 5.9

---
 core/rtw_recv.c                    | 4 +---
 core/rtw_xmit.c                    | 4 +---
 hal/rtl8822c/sdio/rtl8822cs_xmit.c | 4 +---
 3 files changed, 3 insertions(+), 9 deletions(-)

diff --git a/core/rtw_recv.c b/core/rtw_recv.c
index 2b5baef..ae95382 100755
--- a/core/rtw_recv.c
+++ b/core/rtw_recv.c
@@ -4855,9 +4855,7 @@ thread_return rtw_recv_thread(thread_context context)
 	s32 err = _SUCCESS;
 #ifdef RTW_RECV_THREAD_HIGH_PRIORITY
 #ifdef PLATFORM_LINUX
-	struct sched_param param = { .sched_priority = 1 };
-
-	sched_setscheduler(current, SCHED_FIFO, &param);
+	sched_set_fifo(current);
 #endif /* PLATFORM_LINUX */
 #endif /*RTW_RECV_THREAD_HIGH_PRIORITY*/
 	thread_enter("RTW_RECV_THREAD");
diff --git a/core/rtw_xmit.c b/core/rtw_xmit.c
index 8c85177..650359e 100644
--- a/core/rtw_xmit.c
+++ b/core/rtw_xmit.c
@@ -5601,9 +5601,7 @@ thread_return rtw_xmit_thread(thread_context context)
 	PADAPTER padapter;
 #ifdef RTW_XMIT_THREAD_HIGH_PRIORITY
 #ifdef PLATFORM_LINUX
-	struct sched_param param = { .sched_priority = 1 };
-
-	sched_setscheduler(current, SCHED_FIFO, &param);
+	sched_set_fifo(current);
 #endif /* PLATFORM_LINUX */
 #endif /* RTW_XMIT_THREAD_HIGH_PRIORITY */
 
diff --git a/hal/rtl8822c/sdio/rtl8822cs_xmit.c b/hal/rtl8822c/sdio/rtl8822cs_xmit.c
index 2c08565..4ea73c3 100755
--- a/hal/rtl8822c/sdio/rtl8822cs_xmit.c
+++ b/hal/rtl8822c/sdio/rtl8822cs_xmit.c
@@ -453,9 +453,7 @@ thread_return rtl8822cs_xmit_thread(thread_context context)
 	u8 thread_name[20] = "RTWHALXT";
 #ifdef RTW_XMIT_THREAD_HIGH_PRIORITY_AGG
 #ifdef PLATFORM_LINUX
-	struct sched_param param = { .sched_priority = 1 };
-
-	sched_setscheduler(current, SCHED_FIFO, &param);
+	sched_set_fifo(current);
 #endif /* PLATFORM_LINUX */
 #endif /* RTW_XMIT_THREAD_HIGH_PRIORITY_AGG */
 
