From 4f08976f5b6c3e8810ad693eb46b623d4f8b0af0 Mon Sep 17 00:00:00 2001
From: Dom Cobley <popcornmix@gmail.com>
Date: Tue, 21 Nov 2023 19:28:51 +0000
Subject: [PATCH 005/748] Revert "staging: vc04_services: bcm2835-camera: Drop
 MODULE_ALIAS"

This reverts commit 017b9ef371e06f852e52b290e4e3c5b5fdf9ceba.
---
 .../staging/vc04_services/bcm2835-camera/bcm2835-camera.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c b/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
index e6e89784d84b..863d8ae46a69 100644
--- a/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
+++ b/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
@@ -1995,16 +1995,9 @@ static void bcm2835_mmal_remove(struct vchiq_device *device)
 	vchiq_mmal_finalise(instance);
 }
 
-static const struct vchiq_device_id device_id_table[] = {
-	{ .name = "bcm2835-camera" },
-	{}
-};
-MODULE_DEVICE_TABLE(vchiq, device_id_table);
-
 static struct vchiq_driver bcm2835_camera_driver = {
 	.probe		= bcm2835_mmal_probe,
 	.remove		= bcm2835_mmal_remove,
-	.id_table	= device_id_table,
 	.driver		= {
 		.name	= "bcm2835-camera",
 	},
@@ -2015,3 +2008,4 @@ module_vchiq_driver(bcm2835_camera_driver)
 MODULE_DESCRIPTION("Broadcom 2835 MMAL video capture");
 MODULE_AUTHOR("Vincent Sanders");
 MODULE_LICENSE("GPL");
+MODULE_ALIAS("bcm2835-camera");
-- 
2.43.0

