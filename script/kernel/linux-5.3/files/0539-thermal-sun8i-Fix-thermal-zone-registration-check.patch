From 60b5b4d3188bd56874062d953c9fd13c8b42672d Mon Sep 17 00:00:00 2001
From: Ondrej Jirman <megous@megous.com>
Date: Sun, 1 Sep 2019 18:43:11 +0200
Subject: [PATCH 09/26] thermal: sun8i: Fix thermal zone registration check

Some uninitialized variable was wrongly checked.

Signed-off-by: Ondrej Jirman <megous@megous.com>
---
 drivers/thermal/sun8i_thermal.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/thermal/sun8i_thermal.c b/drivers/thermal/sun8i_thermal.c
index 372fa2045517..e510c979fa39 100644
--- a/drivers/thermal/sun8i_thermal.c
+++ b/drivers/thermal/sun8i_thermal.c
@@ -442,7 +442,6 @@ static int sun50i_h6_thermal_init(struct ths_device *tmdev)
 
 static int sun8i_ths_register(struct ths_device *tmdev)
 {
-	struct thermal_zone_device *tzd;
 	int i;
 
 	for (i = 0; i < tmdev->chip->sensor_num; i++) {
@@ -454,7 +453,7 @@ static int sun8i_ths_register(struct ths_device *tmdev)
 							     &tmdev->sensor[i],
 							     &ths_ops);
 		if (IS_ERR(tmdev->sensor[i].tzd))
-			return PTR_ERR(tzd);
+			return PTR_ERR(tmdev->sensor[i].tzd);
 	}
 
 	return 0;
-- 
2.23.0

