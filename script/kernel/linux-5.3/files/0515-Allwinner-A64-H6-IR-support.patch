From patchwork Fri Jun  7 23:10:48 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982907
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 5115C17D2
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:11:34 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 3C50828A96
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:11:34 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 3024228ACD; Fri,  7 Jun 2019 23:11:34 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id A351428A96
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:11:33 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=dljHP37l13bvBbYDqZIfSPRR+vDzKdXcDKsHX9cPLEY=; b=gSZFOr3yEjiek2
	/hGlR63451cVZXYqwNEjkxKJovqZ+gvOdb46yZNm2YLK4zhwXoxNUZi5z7xGD8XadGT+dZbtXFzmW
	dcf4BsKFQolpBeJFkeV9F4rMZJDJSk91ugrNatpn3YsvgIHClRBsMsdCUPx7tTWksMQ1UJVIer5yj
	3WKgJfBuEaIDGuewWIgT9kOSbQZsmYbw9anKnelLE77KfZwatFd6W8e3zh8YO0QKeA9YZ/90bTfsh
	l0ZGLxzCbGkA1tglZHyzwXiFXR2FYwysz34/N/DZKTgUqcstoiIBJhIQ/alglCTI/YIdm29MVBIYx
	p8anFJ3nS1bBa5v3YgIA==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO1A-0001CQ-Sd; Fri, 07 Jun 2019 23:11:28 +0000
Received: from mail-wr1-x444.google.com ([2a00:1450:4864:20::444])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0t-0000uQ-AM
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:12 +0000
Received: by mail-wr1-x444.google.com with SMTP id c2so3618431wrm.8
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=fSxZI8EC5PtCV9rMqk5b6iP4sZNex2jHwm6j6LayujA=;
 b=IjBjOJm+fMtl+k47Jb+MoI7wK6zNUwAp3Xqv+mnEqlvbZVa1s4gRP7ABh634VkaW6I
 PoWRcLgeCNzkqym0sy0T52hCYiWifkIzGqWXc6BKmrEym83kNcyitLbxXRcEmU0OeMHG
 4buJOpicNyA7ww6YJkl3teBb8vwg40V8pEngLQSRRdSvm0D2dHzJt0vmgPVnRFkRVIQ+
 ixRYXERNbuXC0kUsfitCT1TIBoiCI0dreXZ5FJnyHpo7CBn1zWaQKhPrNpMf+B79fdYG
 nldVaVLE8PD0dumalfgk2/FL8gbiheUGV2GTFTKUlp70ERRkxCvZDAHnqJ+4GGMtXH9v
 2cEA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=fSxZI8EC5PtCV9rMqk5b6iP4sZNex2jHwm6j6LayujA=;
 b=BeIekVwgETyFmjdzNA3cZPpTTrIeCKlXrsrDomJpd0oEr3kSFgtMcMu/ZYLLFCwo8v
 Ldy64u3nvJvdMh6g5Yue8r7CuINhenFcc3bJ3rerGyUL8Q1GfTZ4TPGo0VYcWJuAGJf4
 hp1OBL4FvK9Csubyn73tf+DsBvXjqtFs6AKHTkCUgCtyrFmEmKKz1m9S3oBcS7/wX9cS
 8jSUgXJdE47Ht4c8V+vFWp3V6EEE9m0YFwbrTm7qBfBZdQGXsQ/RBPkoRoTQapQ+svj9
 Kv5sRlEyCoeIbigAUezL/tfN1l1SIrjEqifet0fNcnC6SkVgbTMBJmyFKO39SgOHQ+Zi
 NtQg==
X-Gm-Message-State: APjAAAV0NjMEothS7gKR+iXIULNl06QtpPUwEcIF0qWBd2qUoiYfJfE4
 R/nE1+98ixkCZ9f1aWgEeqI=
X-Google-Smtp-Source: 
 APXvYqz/xMBVF7B54pr7kQTSNoBThGB1ZrYt6kSdD2qCIyzse+KpGDY3fYfN5JJH/fw+HZ3+9eUtQg==
X-Received: by 2002:adf:ff84:: with SMTP id j4mr8597734wrr.151.1559949069714;
 Fri, 07 Jun 2019 16:11:09 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.09
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:09 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 01/13] dt-bindings: media: sunxi-ir: Add A31 compatible
Date: Sat,  8 Jun 2019 01:10:48 +0200
Message-Id: <20190607231100.5894-2-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161111_370843_53BFA11A 
X-CRM114-Status: GOOD (  14.72  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Allwinner A31 has introduced a new memory mapping and a
reset line.

The difference in memory mapping are :

- In the configure register there is a new sample bit
  and Allwinner has introduced the active threshold feature.

- In the status register a new STAT bit is present.

Note: CGPO and DRQ_EN bits are removed on A31 but present on A13
and on new SoCs like A64/H6.
This is actually not an issue as these bits are togglable and new
SoCs have a dedicated bindings.

Introduce this bindings to make a difference since this generation.
And declare the reset line required since A31.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
Acked-by: Maxime Ripard <maxime.ripard@bootlin.com>
Reviewed-by: Rob Herring <robh@kernel.org>
---
 Documentation/devicetree/bindings/media/sunxi-ir.txt | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/Documentation/devicetree/bindings/media/sunxi-ir.txt b/Documentation/devicetree/bindings/media/sunxi-ir.txt
index 278098987edb..2e59a32a7e33 100644
--- a/Documentation/devicetree/bindings/media/sunxi-ir.txt
+++ b/Documentation/devicetree/bindings/media/sunxi-ir.txt
@@ -1,16 +1,21 @@
 Device-Tree bindings for SUNXI IR controller found in sunXi SoC family
 
 Required properties:
-- compatible	    : "allwinner,sun4i-a10-ir" or "allwinner,sun5i-a13-ir"
+- compatible	    :
+	"allwinner,sun4i-a10-ir"
+	"allwinner,sun5i-a13-ir"
+	"allwinner,sun6i-a31-ir"
 - clocks	    : list of clock specifiers, corresponding to
 		      entries in clock-names property;
 - clock-names	    : should contain "apb" and "ir" entries;
 - interrupts	    : should contain IR IRQ number;
 - reg		    : should contain IO map address for IR.
 
+Required properties since A31:
+- resets	    : phandle + reset specifier pair
+
 Optional properties:
 - linux,rc-map-name: see rc.txt file in the same directory.
-- resets : phandle + reset specifier pair
 - clock-frequency  : IR Receiver clock frequency, in Hertz. Defaults to 8 MHz
 		     if missing.
 

From patchwork Fri Jun  7 23:10:49 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982921
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 3D7FA76
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:02 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 2A0F628A96
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:02 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 1B1FC28BE9; Fri,  7 Jun 2019 23:12:02 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 9D2A028A96
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:01 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=RtThuGcSpcFQ5kKZFhUoV6hOqtyxhpm/v8gK6HhX2Os=; b=B/ihzPVxAaq1zJ
	Poxz9ynvkpHO2+sxkeMvjQGxR0j1NL4SgUlk0C/htMIM5bAdhK5fJcxkILsn3ahsgrq+4x2JTEgyg
	yIYWMzR9116Lwiir/vbUXdyr0QvTZ8I5MUULpvBf/GziCZ0WnRHa4KAdjHqB3IdPIRWsxu2wXbSU4
	ojkmuRgo/RiGvdnw9NvF28VSNV/boQfSvvqOatK14ArzQiApLr3Ct+OTFywVbVp1Nq57ZolW9ANW+
	Ri8ej8nR+RO8TesjiETKsJK1bWaVjI7SsFpiMbjq3HRnX7LaIvaBgq6IkA89lMTHRX+LuxGryR97f
	Ly3WCrlAebAZqCDET2+A==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO1a-0001YN-NB; Fri, 07 Jun 2019 23:11:54 +0000
Received: from mail-wr1-x444.google.com ([2a00:1450:4864:20::444])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0u-0000v7-EV
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:14 +0000
Received: by mail-wr1-x444.google.com with SMTP id v14so3634893wrr.4
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=nQa52sUHZ517m7H0LPZd/LRjrkZC8z+E4fM+VmhMcO0=;
 b=CECHZJqg/l5iO56T6hSFDxp8SKDvbku/8/gT+5g/3BhUfSrCljN4D11Laf+iXL29JR
 RMC0fWsn4BGkqOU7ZAsRawsHpNrGBQd5qzvD172Ces5DFruTSwS+nT/FbGDjaLx0k13X
 snmUOZTNZ2u3xtC02JBeWERzKEQ93DZ+JQABqrPpaxYu6KNjDh69svYQOlLVklgcgXQz
 GyFRkB/R8Tf2C9iuc77m0KP8CXt09E0VYwFrknpV+8NArPH+jWh5IW7/ZoP/5RgkY0JH
 t3kGCt0sTkjj6RzMTbugneDy2SA8nyILg70FzTlTSt3cWTkj94gB/K+XT19AFXHxSCra
 AuZA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=nQa52sUHZ517m7H0LPZd/LRjrkZC8z+E4fM+VmhMcO0=;
 b=O3M3xvTqdYa9J0WNS32hdZeAr16d8HIF5/dI5VfmOpOn05WDzzkEDcX/sgVg4GBsKl
 l/8CWWwx8jWF+TSFw0fZmetXpgYrb0ee1NZXrlapzOr4AL7AibgKHlUwNlk3aICrxnCC
 p18208jJndhovi7TyRpra/XcMy9Vleg3VXmn1szY14SZGdPdUXhWKDsxc/IEVd0ixJPN
 qltOAQDDO8NTEj9S1x8//RYLcL5ZIRDRHwAANqKBKn6lOFWBaE7xUrQajxLLa1UAfml9
 4BZF6zkUsFFefxaaXL+wrTBGYlWh3egSNVS3BeLUl/vgqZayHkvPzxRT2QspwKtZEvTd
 tbPQ==
X-Gm-Message-State: APjAAAUDYmnFBkcTlSY3UmgGBXxcAdZ8Ho5MCkXbJ8+Qfs1P28iBoLcn
 5LIXALDzWrBkHZYLAlgjk30=
X-Google-Smtp-Source: 
 APXvYqwHX/FPxKirOi8VnV5ct8inI/+gasfuvYrdXORuCb+nY+vevbp3JsrN3ja9w8hPuIQD2+c1jQ==
X-Received: by 2002:adf:cc85:: with SMTP id p5mr20049716wrj.47.1559949071207;
 Fri, 07 Jun 2019 16:11:11 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.09
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:09 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 02/13] media: rc: Introduce sunxi_ir_quirks
Date: Sat,  8 Jun 2019 01:10:49 +0200
Message-Id: <20190607231100.5894-3-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161112_496968_78D8F3EF 
X-CRM114-Status: GOOD (  17.21  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

This driver is used in various Allwinner SoC with different configuration.

Introduce a quirks struct to know the fifo size and if a reset is required.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
Acked-by: Maxime Ripard <maxime.ripard@bootlin.com>
---
 drivers/media/rc/sunxi-cir.c | 61 +++++++++++++++++++++++++++---------
 1 file changed, 47 insertions(+), 14 deletions(-)

diff --git a/drivers/media/rc/sunxi-cir.c b/drivers/media/rc/sunxi-cir.c
index 307e44714ea0..d02dcb6fd0a5 100644
--- a/drivers/media/rc/sunxi-cir.c
+++ b/drivers/media/rc/sunxi-cir.c
@@ -81,6 +81,17 @@
 /* Time after which device stops sending data in ms */
 #define SUNXI_IR_TIMEOUT      120
 
+/**
+ * struct sunxi_ir_quirks - Differences between SoC variants.
+ *
+ * @has_reset: SoC needs reset deasserted.
+ * @fifo_size: size of the fifo.
+ */
+struct sunxi_ir_quirks {
+	bool		has_reset;
+	int		fifo_size;
+};
+
 struct sunxi_ir {
 	spinlock_t      ir_lock;
 	struct rc_dev   *rc;
@@ -143,6 +154,7 @@ static int sunxi_ir_probe(struct platform_device *pdev)
 
 	struct device *dev = &pdev->dev;
 	struct device_node *dn = dev->of_node;
+	const struct sunxi_ir_quirks *quirks;
 	struct resource *res;
 	struct sunxi_ir *ir;
 	u32 b_clk_freq = SUNXI_IR_BASE_CLK;
@@ -151,12 +163,15 @@ static int sunxi_ir_probe(struct platform_device *pdev)
 	if (!ir)
 		return -ENOMEM;
 
+	quirks = of_device_get_match_data(&pdev->dev);
+	if (quirks == NULL) {
+		dev_err(&pdev->dev, "Failed to determine the quirks to use\n");
+		return -ENODEV;
+	}
+
 	spin_lock_init(&ir->ir_lock);
 
-	if (of_device_is_compatible(dn, "allwinner,sun5i-a13-ir"))
-		ir->fifo_size = 64;
-	else
-		ir->fifo_size = 16;
+	ir->fifo_size = quirks->fifo_size;
 
 	/* Clock */
 	ir->apb_clk = devm_clk_get(dev, "apb");
@@ -173,13 +188,15 @@ static int sunxi_ir_probe(struct platform_device *pdev)
 	/* Base clock frequency (optional) */
 	of_property_read_u32(dn, "clock-frequency", &b_clk_freq);
 
-	/* Reset (optional) */
-	ir->rst = devm_reset_control_get_optional_exclusive(dev, NULL);
-	if (IS_ERR(ir->rst))
-		return PTR_ERR(ir->rst);
-	ret = reset_control_deassert(ir->rst);
-	if (ret)
-		return ret;
+	/* Reset */
+	if (quirks->has_reset) {
+		ir->rst = devm_reset_control_get_exclusive(dev, NULL);
+		if (IS_ERR(ir->rst))
+			return PTR_ERR(ir->rst);
+		ret = reset_control_deassert(ir->rst);
+		if (ret)
+			return ret;
+	}
 
 	ret = clk_set_rate(ir->clk, b_clk_freq);
 	if (ret) {
@@ -316,10 +333,26 @@ static int sunxi_ir_remove(struct platform_device *pdev)
 	return 0;
 }
 
+static const struct sunxi_ir_quirks sun4i_a10_ir_quirks = {
+	.has_reset = false,
+	.fifo_size = 16,
+};
+
+static const struct sunxi_ir_quirks sun5i_a13_ir_quirks = {
+	.has_reset = false,
+	.fifo_size = 64,
+};
+
 static const struct of_device_id sunxi_ir_match[] = {
-	{ .compatible = "allwinner,sun4i-a10-ir", },
-	{ .compatible = "allwinner,sun5i-a13-ir", },
-	{},
+	{
+		.compatible = "allwinner,sun4i-a10-ir",
+		.data = &sun4i_a10_ir_quirks,
+	},
+	{
+		.compatible = "allwinner,sun5i-a13-ir",
+		.data = &sun5i_a13_ir_quirks,
+	},
+	{}
 };
 MODULE_DEVICE_TABLE(of, sunxi_ir_match);
 

From patchwork Fri Jun  7 23:10:50 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982929
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 78F9976
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:15 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 646FB28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:15 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 5876328BED; Fri,  7 Jun 2019 23:12:15 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 0F58628AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:15 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=mowwNvSqR4DIDekoiTzrtvZRWyKuOBcWCri7F+QkrXQ=; b=Aq4xlnIp42mbZC
	lwu0tOiZ61kF2nDGzcwpxqejIExFxiONjMqcUDzlZT1xi9QaQXrINVZ7i7Zf4nXB5Kz8B8zwkLwkE
	GyVpMFTn1fEvqJUp+W29kj5yMqT/IpZnpbCMsjvwt7UxnG7TS3dbhNcIp0zLGqg8LIb3/nY9jhrwO
	H+L1iI0clpNi+5dnkeUFo5JrX285AZ5k/V1m5ZNqWgMkR8Lli0wXtYKp13qYG5dMdUpayNiMkRta+
	6mHEvjq5thL0vFcttRayyZTazvcHEY0EupbnUSymDqNkisKSA2CFZic5GCtvE2rKvYRXbme32q1Ez
	hYaD8dH4UJUdQkZHlPFg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO1q-0001pm-DX; Fri, 07 Jun 2019 23:12:10 +0000
Received: from mail-wm1-x343.google.com ([2a00:1450:4864:20::343])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0v-0000vX-SE
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:15 +0000
Received: by mail-wm1-x343.google.com with SMTP id f10so3503350wmb.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=Lol1q6oip3iAiLWaqttTm7yI5iUN53ws0ToXRxpRMt8=;
 b=oXRJCsXeB+er7f3oAowCoBA9MPGtd+CYB5T7BUiotF8B1kGDp8+d9K1KqzKfdShrhO
 EzsDwPmv15ztStk620DR0HwNFQEcBix+D8fW3lgCK/kjelJcdZ/eyufnEQ9SFEp7CQqF
 QuE6sW786uKiJbieQQjXWNzalxrGmb9Sa9/EKROMwFL5KJ7KRaYKt98DNX0BBiCKclf6
 dQQcURi/LwIl9gKW+MYByw1F1CKHTOwEH07eQSwhwRa9olW4UVH7aONLVNvsuaeIDtyf
 Z/Ejf4KPicB5vziOFFhqeruDnkIrNbB9sd66bqwTYwzRvOXLPpzQfirCvfY+m1slayQf
 aaDA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=Lol1q6oip3iAiLWaqttTm7yI5iUN53ws0ToXRxpRMt8=;
 b=YWXP0n7MQ2poZORK18D5BhAgXCWl0GbHOXpzrh1RJ2xHtwPRkVovOJrcGhWfZ5Pshj
 MlPD3S1ZHqNIcHJ3vaKN7lXpaqs9rT8wW25hxUUdJerbD17y04pXDt7IWpMzo2JBMhTh
 +EjGOrSSQtW1B1AiEZ/8hYRPrJ+Q66Rb1qeUXi6fTI3JOVlVm0GSpUqetjO6cFrYud15
 xF1HMBDPjhquDcb1joJNZHFZ4D9QJZmq670JlomNGXm6A7zEs4pDbicZqkXx/ERRWL2p
 4PF/rxF/RAQ+XMhoPlASKva+rgZQ8evzPhGMt1LLTh5HaKOOoa4xjhDNs/711Z2BF0vI
 0uYA==
X-Gm-Message-State: APjAAAXv3etqVgz5S3SVKJql/r7++ImtmKhGZJGJ+B2wu/KB11FmPZiN
 fN2BV53w7sP027IpvasSLsE=
X-Google-Smtp-Source: 
 APXvYqztHS7XCrwAZuxX3MKe/AIl2WKNXYx30cRsf1SdkQ5dTVEjbyQ1ZNptaV+f9m3ZRJVuntO8Aw==
X-Received: by 2002:a1c:c282:: with SMTP id
 s124mr5382313wmf.141.1559949072272;
 Fri, 07 Jun 2019 16:11:12 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.11
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:11 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 03/13] media: rc: sunxi: Add A31 compatible
Date: Sat,  8 Jun 2019 01:10:50 +0200
Message-Id: <20190607231100.5894-4-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161113_933859_1D05D97C 
X-CRM114-Status: GOOD (  11.98  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Allwiner A31 has a different memory mapping so add the compatible
we will need it later.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
Acked-by: Maxime Ripard <maxime.ripard@bootlin.com>
---
 drivers/media/rc/sunxi-cir.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/drivers/media/rc/sunxi-cir.c b/drivers/media/rc/sunxi-cir.c
index d02dcb6fd0a5..0504ebfc831f 100644
--- a/drivers/media/rc/sunxi-cir.c
+++ b/drivers/media/rc/sunxi-cir.c
@@ -343,6 +343,11 @@ static const struct sunxi_ir_quirks sun5i_a13_ir_quirks = {
 	.fifo_size = 64,
 };
 
+static const struct sunxi_ir_quirks sun6i_a31_ir_quirks = {
+	.has_reset = true,
+	.fifo_size = 64,
+};
+
 static const struct of_device_id sunxi_ir_match[] = {
 	{
 		.compatible = "allwinner,sun4i-a10-ir",
@@ -352,6 +357,10 @@ static const struct of_device_id sunxi_ir_match[] = {
 		.compatible = "allwinner,sun5i-a13-ir",
 		.data = &sun5i_a13_ir_quirks,
 	},
+	{
+		.compatible = "allwinner,sun6i-a31-ir",
+		.data = &sun6i_a31_ir_quirks,
+	},
 	{}
 };
 MODULE_DEVICE_TABLE(of, sunxi_ir_match);

From patchwork Fri Jun  7 23:10:51 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982937
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id E82DD76
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:35 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id D3B5328AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:35 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id C7D7C28BED; Fri,  7 Jun 2019 23:12:35 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 5CB8228AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:35 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=itYaJb5WfbN8H2QP5ETE9+qCnL6xqP/kChX+1XHvdLA=; b=VMk2GOPgoDugpA
	nSeea7+rsnw7zaShZ5tA4wAp7qk/gmUaz1b+lf/UY3kti1PAlzeZ8so3GpHSWiR74WV+SEubiiUb2
	k5Z5mOtgEMDOhe1oFYG+ENsLYeHDX9ov2VBsZ79PDXI/s6TH+mgWx+eyewzjFStu7Zq6ZegMsP2wP
	OLNrVrqgWwUuMT9mlpJRlGWg0li00Wf4d4Striyh0KIHIvlfK51y6ll7qXVLFjlP+q+/mZR1Rv9My
	pe9G1NFVYjZxOJEGNZ+5tqzVsJxbC7ict6LpDmNGEV+qLxqDS0Jh611gWY1FgFOTHFDRt7klKKayS
	jqENsHhiKBXdBhBbGGQg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO29-00026v-EG; Fri, 07 Jun 2019 23:12:29 +0000
Received: from mail-wm1-x341.google.com ([2a00:1450:4864:20::341])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0x-0000wr-9A
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:16 +0000
Received: by mail-wm1-x341.google.com with SMTP id u8so3304270wmm.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=7GEHwh/r4T7qgHwLm9BpliTLYMp1uwbqc4fRyWp+9LU=;
 b=L+DoBBYW26kUIiCrZIML4fSKfVB4+Han2fYg+Y+AEfOvdl6df+liQaUdhkPwlO/6Sf
 pRl9IKkOjj7XH+t7RhROSpgvi7iJ/cGIrO5K8x2XUaeBtCIlCN69lBw3xJGH0SCWdiTX
 3/Drvnay9CxdWDckD/1+NYBBoK0hkiW9wwCfEan0KIFCVtSgVGWhkkYuA4IVk6aO7/uw
 MSTuWMTP/BV2TLHL92zr7hK0rMHELO7ZjE35vSj9ASO3Xvkj8gj0+fCDol/d4lKNp26J
 bWllR9eNc40qX/5xhp9XWmMYN6Pr/pCpzLnzIQFczG2w2E7FfYajR75sYXUxGsMbJfni
 uECg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=7GEHwh/r4T7qgHwLm9BpliTLYMp1uwbqc4fRyWp+9LU=;
 b=ky4ex4kmYgOsstpuUPHlXPYqCnHUMFFfuvTJis8cIvvWDFQH0+Y1qavgAGJKGKfGCV
 DIJDnG8ifAoKlqqZITCiRwYjrbQ/i5Gd6egW/u9xxc3NiCEjOVMzPF+U2N6z646Wv5nL
 QWORo+IdUqgVOWTx7+UtkMfd0RDY8oBd33CcuDKfJzU8Aop+I0c+ZLuyOi3veNP9dPgs
 +ScjqF4xdAuXo/Oqz5TxDHriFWZnCHIIJ3mCPyR5hcDy32Fi6gz9VNjlRE4iK+48kXqM
 r7yxR4F8E5mdjxtVhnk8Woj7HlOe1VpPbExWQcMiAwchNLOPEkRzf/a5pGxYX+IwwJrD
 bw8Q==
X-Gm-Message-State: APjAAAWrV9d8p4VX1kPn6ovUMx/Q7ZCj2RAQNh6LYjxF9mb1Vr8RNinW
 vgNUqopcjJq1yp5R78Mpcug=
X-Google-Smtp-Source: 
 APXvYqwUfHoRNiyI8qxZ99qGY5vY4n9q91qmbDFEOvJJaMrhrSb6D3nxxuEgESrd+BAF3/p7lUwjyQ==
X-Received: by 2002:a1c:1d83:: with SMTP id d125mr5140296wmd.63.1559949073446;
 Fri, 07 Jun 2019 16:11:13 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.12
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:12 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 04/13] media: rc: sunxi: Add RXSTA bits definition
Date: Sat,  8 Jun 2019 01:10:51 +0200
Message-Id: <20190607231100.5894-5-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161115_365744_EC5E347C 
X-CRM114-Status: GOOD (  13.08  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 linux-sunxi@googlegroups.com,
 =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

We are using RXINT bits definition when looking at RXSTA register.

These bits are equal but it's not really proper.

Introduce the RXSTA bits and use them to have coherency.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Maxime Ripard <maxime.ripard@bootlin.com>
Acked-by: Sean Young <sean@mess.org>
---
 drivers/media/rc/sunxi-cir.c | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

diff --git a/drivers/media/rc/sunxi-cir.c b/drivers/media/rc/sunxi-cir.c
index 0504ebfc831f..5690d0bd51bc 100644
--- a/drivers/media/rc/sunxi-cir.c
+++ b/drivers/media/rc/sunxi-cir.c
@@ -48,11 +48,11 @@
 
 /* Rx Interrupt Enable */
 #define SUNXI_IR_RXINT_REG    0x2C
-/* Rx FIFO Overflow */
+/* Rx FIFO Overflow Interrupt Enable */
 #define REG_RXINT_ROI_EN		BIT(0)
-/* Rx Packet End */
+/* Rx Packet End Interrupt Enable */
 #define REG_RXINT_RPEI_EN		BIT(1)
-/* Rx FIFO Data Available */
+/* Rx FIFO Data Available Interrupt Enable */
 #define REG_RXINT_RAI_EN		BIT(4)
 
 /* Rx FIFO available byte level */
@@ -60,6 +60,12 @@
 
 /* Rx Interrupt Status */
 #define SUNXI_IR_RXSTA_REG    0x30
+/* Rx FIFO Overflow */
+#define REG_RXSTA_ROI			REG_RXINT_ROI_EN
+/* Rx Packet End */
+#define REG_RXSTA_RPE			REG_RXINT_RPEI_EN
+/* Rx FIFO Data Available */
+#define REG_RXSTA_RA			REG_RXINT_RAI_EN
 /* RX FIFO Get Available Counter */
 #define REG_RXSTA_GET_AC(val) (((val) >> 8) & (ir->fifo_size * 2 - 1))
 /* Clear all interrupt status value */
@@ -119,7 +125,7 @@ static irqreturn_t sunxi_ir_irq(int irqno, void *dev_id)
 	/* clean all pending statuses */
 	writel(status | REG_RXSTA_CLEARALL, ir->base + SUNXI_IR_RXSTA_REG);
 
-	if (status & (REG_RXINT_RAI_EN | REG_RXINT_RPEI_EN)) {
+	if (status & (REG_RXSTA_RA | REG_RXSTA_RPE)) {
 		/* How many messages in fifo */
 		rc  = REG_RXSTA_GET_AC(status);
 		/* Sanity check */
@@ -135,9 +141,9 @@ static irqreturn_t sunxi_ir_irq(int irqno, void *dev_id)
 		}
 	}
 
-	if (status & REG_RXINT_ROI_EN) {
+	if (status & REG_RXSTA_ROI) {
 		ir_raw_event_reset(ir->rc);
-	} else if (status & REG_RXINT_RPEI_EN) {
+	} else if (status & REG_RXSTA_RPE) {
 		ir_raw_event_set_idle(ir->rc, true);
 		ir_raw_event_handle(ir->rc);
 	}

From patchwork Fri Jun  7 23:10:52 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982941
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id BC33315E6
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:05 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id A87C928AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:05 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 9C94428BED; Fri,  7 Jun 2019 23:13:05 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 7AE5E28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:04 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=UaBkIFxQs6cyfqZoRRiPw4RENsWBN7LO4uwx73rUXRc=; b=CwuLvVSXr17XrD
	qlHSTMcsZryUyX4b2dkGMlohV+Afbn7m4Do48EXVHyy3K/GfyHv+Ytm8govVETCBXCF0ObrrabvhL
	wsVvH5sMNtCGr4PySEZH4tdWDtp0aDY59AiwKS7AQ3ijlKJ5sKoL15EPaKKyrDtjIEAcjkYHyL7UO
	q4w1WvQje5YvXYKu91LJY89G7xVuD5qnJGwV83DibQFodiXG+oJm8NAnhAqC/2iVG96yXXQZhWnWc
	Vhy4jPuAHnvSA71qvTVwz7cPgiWstJH1pChtjTEuhVn7tpPwSgYUXOyVQOC74UJyrPIlYfRf1nLq4
	9O7hGKy5kMbYCRzHrudQ==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO2e-0002bs-PU; Fri, 07 Jun 2019 23:13:00 +0000
Received: from mail-wr1-x444.google.com ([2a00:1450:4864:20::444])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0y-0000xs-23
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:17 +0000
Received: by mail-wr1-x444.google.com with SMTP id x4so971157wrt.6
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=E4E30xpqxw1cyUThhqcs8LcBlilNIoX4BY+l8x9uJrk=;
 b=nS21om+sxmgQhlX01Uzu3VcogD22hZ1kHhzDLmgBxs0AswjQws9aI3nyYVsa+trWaj
 LTimR/IkxY73JBSpn1aE21GzZneJv0mp0uCeLh/Zy+51tc6xkWmUXNtqxlxKp1lbhS+a
 1Zt0xuip8BIrCtufL1kMLDesoB/OM1g0yj8JpJqRpzuezZOr0/TJNIIlTMUMc2+NRW6W
 C1yhY3acXuSv1RhNg87OREdA6FILarBltHh+S0FbvQUYxiDEgHPuKMQHrRSfUwzx7fI/
 ZGkXhoLcGX/7zqrSCxKpJsagbXNVYQQgfArtSuvdPGRYtlW02QzG8MD8oaY8GgF8NJzm
 fItQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=E4E30xpqxw1cyUThhqcs8LcBlilNIoX4BY+l8x9uJrk=;
 b=ifE00tnxB2LpLJjbll8bMd+0TsuZ+BgBlgmUczCnk8eAROGYLUwgYoMvi9OGHjpknP
 +PmLTwX64sIAGPAbZNyMuNDzt8iybl1D5+TgV4HZjAI+WghpvgsZMGQqAZotwbJLpKqF
 vN0MKtQiBYyHiDLhFdTYCH6Djdm5IPm/Yejnyy42i199INM62m32v6i6x82JA97UJLCj
 +wrpgQECuPh0gdKdCo4+MACPfSi6SBuYKTCNt3M9p+jr+TxIXQsQpzGVDGxCOGPgFtac
 h5zC+g3tDAiQNIpd5BUHz38ijfO+c2C2EsXwzxDsb1kMjtpgWOpvH0l057QsecyUeGMP
 MAmQ==
X-Gm-Message-State: APjAAAXoRrgjTPmaWO0kEeXp9w2NQGvZrw6LlZEtPqu6/4S0nUjWiCNo
 RZhjQJlPkM5yn4NXl/Qvhf0=
X-Google-Smtp-Source: 
 APXvYqzVT3Th7VqkSyB0yRD4rbflOI8dOw1Wivvjx5R6t+uE5NXQaKKRFZa88frNgIUrvmk5iiRhfg==
X-Received: by 2002:a5d:4087:: with SMTP id o7mr21805064wrp.277.1559949074312;
 Fri, 07 Jun 2019 16:11:14 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.13
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:13 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 05/13] ARM: dts: sunxi: Prefer A31 bindings for IR
Date: Sat,  8 Jun 2019 01:10:52 +0200
Message-Id: <20190607231100.5894-6-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161116_186946_CDAF5914 
X-CRM114-Status: GOOD (  14.39  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Since A31, memory mapping of the IR driver has changed.

Prefer the A31 bindings instead of A13.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm/boot/dts/sun6i-a31.dtsi  | 2 +-
 arch/arm/boot/dts/sun8i-a83t.dtsi | 2 +-
 arch/arm/boot/dts/sun9i-a80.dtsi  | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/boot/dts/sun6i-a31.dtsi b/arch/arm/boot/dts/sun6i-a31.dtsi
index c04efad81bbc..110622b30796 100644
--- a/arch/arm/boot/dts/sun6i-a31.dtsi
+++ b/arch/arm/boot/dts/sun6i-a31.dtsi
@@ -1351,7 +1351,7 @@
 		};
 
 		ir: ir@1f02000 {
-			compatible = "allwinner,sun5i-a13-ir";
+			compatible = "allwinner,sun6i-a31-ir";
 			clocks = <&apb0_gates 1>, <&ir_clk>;
 			clock-names = "apb", "ir";
 			resets = <&apb0_rst 1>;
diff --git a/arch/arm/boot/dts/sun8i-a83t.dtsi b/arch/arm/boot/dts/sun8i-a83t.dtsi
index 392b0cabbf0d..8d603f3309f2 100644
--- a/arch/arm/boot/dts/sun8i-a83t.dtsi
+++ b/arch/arm/boot/dts/sun8i-a83t.dtsi
@@ -1067,7 +1067,7 @@
 
 		r_cir: ir@1f02000 {
 			compatible = "allwinner,sun8i-a83t-ir",
-				"allwinner,sun5i-a13-ir";
+				"allwinner,sun6i-a31-ir";
 			clocks = <&r_ccu CLK_APB0_IR>, <&r_ccu CLK_IR>;
 			clock-names = "apb", "ir";
 			resets = <&r_ccu RST_APB0_IR>;
diff --git a/arch/arm/boot/dts/sun9i-a80.dtsi b/arch/arm/boot/dts/sun9i-a80.dtsi
index 0c1eec9000e3..310cd972ee5b 100644
--- a/arch/arm/boot/dts/sun9i-a80.dtsi
+++ b/arch/arm/boot/dts/sun9i-a80.dtsi
@@ -1167,7 +1167,7 @@
 		};
 
 		r_ir: ir@8002000 {
-			compatible = "allwinner,sun5i-a13-ir";
+			compatible = "allwinner,sun6i-a31-ir";
 			interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
 			pinctrl-names = "default";
 			pinctrl-0 = <&r_ir_pins>;

From patchwork Fri Jun  7 23:10:53 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982939
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 83AD876
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:53 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 7127728BE9
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:53 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 653D328BF1; Fri,  7 Jun 2019 23:12:53 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id F32E728BE9
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:12:52 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=tFgpkoG4CMxBw6QqknElC7CC8N9HuNp6naY6ZdYzMQs=; b=u+AjLWD2o3fS7k
	qpqDApI5ewzglTVBDRUeCfIX66NS84MgJxjgGBvpkTQitZRThB/pohFpMdFNvYFUNveVaUm3D7N1e
	CvDD0stas+qqwgCgfS21C2FkP6bSGY8yJrh+SQKkevGo0rKQwoHD9MfUFRHtQl/p9zRfE2woZVUDM
	IuUgG0MrTCQHNQh+ox1n8t50dEaqfyf/k1nH7iHbj5fdDuOM+qU2QMtVc/Us+VZhDZQltDLqGX8FM
	Ck0POdKupnD3oDOHLmIQxJtbCbNrHo4gDTqZquF2Oq0oRsCi3Ic2AyRZ6OS+ePKVZoxmEj/ejx+IY
	t1GPSulQ2/Q8vhYykERA==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO2Q-0002LT-9K; Fri, 07 Jun 2019 23:12:46 +0000
Received: from mail-wr1-x442.google.com ([2a00:1450:4864:20::442])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0y-0000zA-SF
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:18 +0000
Received: by mail-wr1-x442.google.com with SMTP id p11so3630049wre.7
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=JnmvhZZD8Mx24yTeSpnfmQh3x3T3CVtR6CE0dBfbLB8=;
 b=osOOwQ7kOJIxH7q1sP4SW46/2REatRj3dNel59nhnfmBYPb1CshTkAlqHnkQ/SlTha
 3/jxPR3F1XDxNMResp+TI2Cw2Uz9+2hVrJjhM5I3ccY21BMxWVIH09kfNmOHIOJmG8Z1
 ezIRLYjPhHsvkgm2+Of8ouKxGgY0ijFLk5uV3QewuxYLFJJRVimG9hcU6fJIqKCvxK73
 /4p0wbCf9XBZvz/9a5z4GINxx1s4mJvWQCUYpjwJc1OwuioSjrz/BSzJo/JnakMaC0ij
 TuIooNATlmyuU023PqcumCx+ct6OltX06coqN7ikDiPLyFqqldSMWz/UP080zco7VUxd
 bu7g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=JnmvhZZD8Mx24yTeSpnfmQh3x3T3CVtR6CE0dBfbLB8=;
 b=j+a4f3m3FFDb2aEBpVdeRciVkI2rUNsvHcfL66gdYRnuh3kmK+SYDyp83t8/QI4vfn
 QRxxGDEVwkd5caF7zaVPL1Fkal4n5ZJFiYvQsm9i6NXSnwGQzrTYzUWYn4NIzaFt2oWk
 na5xrBfT5LibLR1ug/m3CkAnuwU06372PAWNHvKlMEeMBMoXo+H0JsT3+JRX7owQ9Ll4
 l/TFg51+c8yxbcYW9AMHhuMK7QLKx49Ys3zzeo2ye+SXUXJoHxU6O9YYO3BV5phIDezi
 rg+Bs2q4M9yJEK4CRD//3+PiHkyfpkJVuGPg8VJ/BKLujWjLpe/gZEpl4d8GMwTrKo7s
 RRTw==
X-Gm-Message-State: APjAAAUZAPSv8oBQ/5heDXjhXhcNiGRVMswoUzzngmZE2o9QOqTWU18H
 HSDswzqSEsqqY+5/e3NuxS8=
X-Google-Smtp-Source: 
 APXvYqxzvMi2E7q37ryIRkiVEGGK3LUQy/2+KYp1m6auhNzADjBso1u1JR0r+SFNXqWeSF4b4WrWYQ==
X-Received: by 2002:adf:fe4e:: with SMTP id m14mr12060521wrs.21.1559949075256;
 Fri, 07 Jun 2019 16:11:15 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.14
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:14 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 06/13] ARM: dts: sunxi: Prefer A31 bindings for IR
Date: Sat,  8 Jun 2019 01:10:53 +0200
Message-Id: <20190607231100.5894-7-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161116_944843_BD5C39BF 
X-CRM114-Status: GOOD (  14.07  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Since A31, memory mapping of the IR driver has changed.

Prefer the A31 bindings instead of A13.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm/boot/dts/sunxi-h3-h5.dtsi | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/sunxi-h3-h5.dtsi b/arch/arm/boot/dts/sunxi-h3-h5.dtsi
index 84977d4eb97a..f0f5ba349c1b 100644
--- a/arch/arm/boot/dts/sunxi-h3-h5.dtsi
+++ b/arch/arm/boot/dts/sunxi-h3-h5.dtsi
@@ -822,7 +822,7 @@
 		};
 
 		ir: ir@1f02000 {
-			compatible = "allwinner,sun5i-a13-ir";
+			compatible = "allwinner,sun6i-a31-ir";
 			clocks = <&r_ccu CLK_APB0_IR>, <&r_ccu CLK_IR>;
 			clock-names = "apb", "ir";
 			resets = <&r_ccu RST_APB0_IR>;

From patchwork Fri Jun  7 23:10:54 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982943
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 31A3A15E6
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:27 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 1C5E228AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:27 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 0F6FD28BED; Fri,  7 Jun 2019 23:13:27 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 9EA6E28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:26 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=uTNlcYnh2Y94pAaIgZaNgflF5u/MBJFxCFLd6HLbNv4=; b=P3ZaiJ03CsBQXz
	XbCQZXBn4khSQymvmDSgqVJAAk8FzEZpkShXuo1lvcA7n2i8aVIFsz2m10xLiOimN6/35TcszXCNM
	hUsibCD5kLPhDOpfr3R8Uuk4ugI92D1yyhGzQLvh+dove8yeMaJ+Uyx5B9mfxmmgFZML1XXC+UdH9
	QWI8+w1es8E8HNcd3hDhgYJYJBlRnHbxZJoCYYKumS0iXkNFMUeUBBhJJmjvNfiCHO4+pdX9GDMau
	mC0+7fISaC5njwgJg0wd/adTocOkE/HTFDLbI01hCJzgQwyDJqRY5ECxj/4+VKowezoq93gOMhgdy
	3/ai/XcN+Tz2fEO/1u0w==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO2y-0002sI-Su; Fri, 07 Jun 2019 23:13:20 +0000
Received: from mail-wr1-x444.google.com ([2a00:1450:4864:20::444])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO0z-00010H-NN
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:19 +0000
Received: by mail-wr1-x444.google.com with SMTP id v14so3634991wrr.4
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=zMV7ju67dnALzanKXh4JjC//iaUgaVunyZA1YYfWVI4=;
 b=D1taeFuKpCeBaakZK2JwO1C7JIOUxjBNTYJw37vy8WucA2FDWY/rutXj/Qpw0AjJy0
 VBvMIEcqseMpghp7l60/6XYSARUTqS1r8y748t7abeL/nUGz+bkQCML250KaoDSlacUL
 1lgvYSuMrdaLNylilrM6CiNyQNt5V1udU9RO2iGKVLgUWOd3sbN1KWhyeRxJlupFSe5h
 HVt5KZ6OsyqnjPa/cptFB5mmOT83rN/yR+2h41ZkJ4yWd5BSZc9QifvpSygjcAD63py6
 PTvqI2rGwGIQ99gbJ/rndapD+EwIjPn2mwbOjYxF5C5lDmOEwMHQGJhZkeCqDwBJaiJA
 AWeQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=zMV7ju67dnALzanKXh4JjC//iaUgaVunyZA1YYfWVI4=;
 b=AlE2jLb+pX9iArQa2JD6/V4mJv+N9kWBI/Gw8NWQCIgyZLGI3W+zekJ+oXlwq0PZwG
 d+Cw1n1SW+/NQI/3kAj9FBjTHY60AG/w77MPPX0wY8VpnpJZR1jBuswxi9PnCLoGAd0V
 fjKHkO+14ky17oH+kFoeCxfQYwFK7/oh9dlDIvCrhgHEjBu6I1q0oVyScZIIHwFw4dph
 YthIW+T9i1WRWODdIjtMUlDn7wiqMsSB1NGklaxC6ezbvXmtltYu6BPHyXMFO21s8A8J
 ip2I+IouXTH+ArCcq+KU/IdPpjS/J+tLgGfIqZhU9oqfCCkh41LM3RhlABDaJYe/jV0t
 mVzw==
X-Gm-Message-State: APjAAAUqyP3di5Ou9P4LZaAvBU/AQrsQDuMPBuqn3kckiY5jrxeKGhM9
 Pe4XKgyquDhxDKTF84jZbLI=
X-Google-Smtp-Source: 
 APXvYqxYMEndAiQdGKsc700CrHbdzz2vLIx6Fq//z6TYlZ9joSLtaGD3Pk68PpctIHwk6bcRFCWzTw==
X-Received: by 2002:adf:dd82:: with SMTP id x2mr11606520wrl.27.1559949076178;
 Fri, 07 Jun 2019 16:11:16 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.15
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:15 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 07/13] dt-bindings: media: sunxi-ir: Add A64 compatible
Date: Sat,  8 Jun 2019 01:10:54 +0200
Message-Id: <20190607231100.5894-8-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161117_857836_6838FCBC 
X-CRM114-Status: GOOD (  11.75  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

There are some minor differences between A31 and A64 driver.

But A31 IR driver is compatible with A64.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
Reviewed-by: Rob Herring <robh@kernel.org>
---
 Documentation/devicetree/bindings/media/sunxi-ir.txt | 1 +
 1 file changed, 1 insertion(+)

diff --git a/Documentation/devicetree/bindings/media/sunxi-ir.txt b/Documentation/devicetree/bindings/media/sunxi-ir.txt
index 2e59a32a7e33..1dd287a4ab3a 100644
--- a/Documentation/devicetree/bindings/media/sunxi-ir.txt
+++ b/Documentation/devicetree/bindings/media/sunxi-ir.txt
@@ -5,6 +5,7 @@ Required properties:
 	"allwinner,sun4i-a10-ir"
 	"allwinner,sun5i-a13-ir"
 	"allwinner,sun6i-a31-ir"
+	"allwinner,sun50i-a64-ir", "allwinner,sun6i-a31-ir"
 - clocks	    : list of clock specifiers, corresponding to
 		      entries in clock-names property;
 - clock-names	    : should contain "apb" and "ir" entries;

From patchwork Fri Jun  7 23:10:55 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982945
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id C8D2D76
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:41 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id B1A6A28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:41 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 9FD1E28BED; Fri,  7 Jun 2019 23:13:41 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 4546B28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:13:41 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=nM+rzxUfac7X1s0L05U4i7cQKMo3jDKju7Ow5vPpWBU=; b=akS/KxJIUw0LDD
	mAfjBek6S322FC2erjyyXrtlxVB1iBecAhffsz3HEQWCXEoQYnPsct8WsVmniBGnaGkOIH4M1W8wr
	ico/XD+QQSAiELwsuk2/KIkJyACEjl3qwoQzxAJoyqtcNlV+f8Qlp8XeN0RO2zdwAzg76Gwy+VjlS
	bwpXFJmtIN/JwfaA4thVm5HOtA3dWHaCp2VQvpfXrLN3j+yQm8bznPc+gsjs9fwy3pApiIRLJB4bK
	AzIYTRblEEv7dhglUp0rVxOg/ffvsZzYFI44axbCQ3+VW8nkc8yPtLRL9W65Am2ELdDiwK0NAhGLk
	baqoMZ+nwJ9ffrJnlhDw==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO3C-00035n-7s; Fri, 07 Jun 2019 23:13:34 +0000
Received: from mail-wm1-x342.google.com ([2a00:1450:4864:20::342])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO10-00011T-Sd
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:20 +0000
Received: by mail-wm1-x342.google.com with SMTP id f10so3503458wmb.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=BsQBIKOAel5fnBJ7QqXJ25YvFcF3acsbydOzLPIsKmY=;
 b=F3abP1GJdWlmfJW/OC7w6iBmIU7IT9Rbr586VC3aGTc5hCHZyoeC5LXUTU52seqokB
 0lum/lXwTv7VihyKAp25E94NNv6ebzvAlfrF1jvag8+cGfIg6N3uFqkt0Zi6NXd2Z9Nz
 /W7Te95jk8n3pJ2prulZW7n8rxtBYqG+Tbr71BswZlyJrmixfWUJN9VCTfgwv7RxTIj1
 Ob2CvmKyf8VQAGtQZ+QTSEJEBXR6w7gebLF/0Np8PGacuW8DCAIbVC/5dnyxZm5XarBV
 lA4m/UiPjNoxuw+jm0uxhugbVpVpF2qCtC2PEbOjG8ErLgIaxVd+0k9v+YGJvRZkfFRV
 4Zgg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=BsQBIKOAel5fnBJ7QqXJ25YvFcF3acsbydOzLPIsKmY=;
 b=S0euLdRMEVwch88au4GcYLY8ExJstxmixWb1X6WQGAvsqeuQeN+U0x9pFUucdTUX3a
 pIQAJ4m2byOR8G0g6ZpuKKWvttNQR2DYsYToOTXxTngkwTk2OTSebvoSaZ6bRSgOiBdG
 XYxhaNV8KmuTW+PzgafZBHzRVjX7Wim1mkMAITKY5DAIhRET568m9kpi851cf1LHJVxM
 Rzx7RjRjK54QLwlB7F3JtlIucPHNfgy0dXuKZJJfgWL3D+8MYRnF/RRceG4/3f2Gmvpd
 vIDdzZwfZAnnK8omy32tkAxnN13Mvu5q9RDEvLab3xLa6TAON+j33DOcjILS6cK4RMfs
 J5kg==
X-Gm-Message-State: APjAAAWjuzcfULcJ5QnAk3REn9r0TOBIWaEcsSq1a1xffYSv+aMAlFsA
 YTBfB3dUlYXGeHvqpvDqQ0w=
X-Google-Smtp-Source: 
 APXvYqzHBE1qVb3MOsnJZBaCNkT/iFJTJDAo6+g+YPS8ESoYt0STIvyQR+CFM/+/sd3m4Oxt45Vn0Q==
X-Received: by 2002:a05:600c:1150:: with SMTP id
 z16mr4958318wmz.168.1559949077095;
 Fri, 07 Jun 2019 16:11:17 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.16
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:16 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 08/13] arm64: dts: allwinner: a64: Add IR node
Date: Sat,  8 Jun 2019 01:10:55 +0200
Message-Id: <20190607231100.5894-9-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161118_941125_C728887F 
X-CRM114-Status: GOOD (  12.12  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Jernej Skrabec <jernej.skrabec@siol.net>,
 Sean Young <sean@mess.org>, linux-kernel@vger.kernel.org,
 Igors Makejevs <git_bb@bwzone.com>, linux-sunxi@googlegroups.com,
	=?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

From: Igors Makejevs <git_bb@bwzone.com>

IR peripheral is completely compatible with A31 one.

Signed-off-by: Igors Makejevs <git_bb@bwzone.com>
Signed-off-by: Jernej Skrabec <jernej.skrabec@siol.net>
Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
index 8c5b521e6389..b22b0aa89515 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi
@@ -1072,6 +1072,19 @@
 			#size-cells = <0>;
 		};
 
+		r_ir: ir@1f02000 {
+			compatible = "allwinner,sun50i-a64-ir",
+				     "allwinner,sun6i-a31-ir";
+			reg = <0x01f02000 0x400>;
+			clocks = <&r_ccu CLK_APB0_IR>, <&r_ccu CLK_IR>;
+			clock-names = "apb", "ir";
+			resets = <&r_ccu RST_APB0_IR>;
+			interrupts = <GIC_SPI 37 IRQ_TYPE_LEVEL_HIGH>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&r_ir_rx_pin>;
+			status = "disabled";
+		};
+
 		r_pwm: pwm@1f03800 {
 			compatible = "allwinner,sun50i-a64-pwm",
 				     "allwinner,sun5i-a13-pwm";
@@ -1099,6 +1112,11 @@
 				function = "s_i2c";
 			};
 
+			r_ir_rx_pin: r-ir-rx-pin {
+				pins = "PL11";
+				function = "s_cir_rx";
+			};
+
 			r_pwm_pin: r-pwm-pin {
 				pins = "PL10";
 				function = "s_pwm";

From patchwork Fri Jun  7 23:10:56 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982949
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 79D3076
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:00 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 64D7F28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:00 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 587DC28BED; Fri,  7 Jun 2019 23:14:00 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 0E31128AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:00 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=3K4yLnsGIwIPrpCbtmNwQbZFE2NJeKsldnC3TqWFDrk=; b=C8aAyQOLB3RqCE
	X1htbH5yamscrXbaqxIVtjNVBM6BTGOG8HkB9Kfv/mJf35vRb7oU6Os3Y6nxcTuhpwvMTfAQuRAon
	r8cp7yyHWThFU6wP+6odpGr9VXgyGd7F52VHvj6UsZBw00MoxmRELzUVtiMEZ0G++VLNBTpJLkL9w
	/Zts0NiUspJNwSq6cqMm/dMyV2CvPp8qxfFKTUZ/1jr/A9VAjqI5SjnbEqyDTnvx3A2OA3vrbLzbb
	L5AN63rImfkrv6Si1yC7xMXXvw43KA40zjBIcvARt6TlggZeJiVIF0hGukwlczit1SSPFSpZ7HPZa
	sWBcvkNHickN6EueZl/A==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO3W-0003Ml-NV; Fri, 07 Jun 2019 23:13:54 +0000
Received: from mail-wr1-x443.google.com ([2a00:1450:4864:20::443])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO11-00012P-NS
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:21 +0000
Received: by mail-wr1-x443.google.com with SMTP id f9so3613938wre.12
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=erM6d71aChyl+Iyy/eqYauRUQ2nKHoueD7cmlIRiQZ8=;
 b=M8xAidn+V0cDdtxVKZcU0GsUhS0BGe2it4zhUBpyeNxNEcOr5R8PfJHWcgzm971XgL
 PvhZ3yFhEiAAcHa9oTIOzu8Vc1N9kJTQV6TLaaLIXrRNsA6ZPQFDm9cR+y0wrwkWuN0b
 uaHQCU7c/L0hmB2PT6DgmtblerDjdmxAFq/VKgc5xnyMTiygGLu5ZwfnMkQN3UuEUllq
 Hmd8hBHmfLYjfIIhzdKSVzWL2sMqpCMW2HtaKVnBO9VoccEo05Xy4FuAwmc+RBopfb/w
 SnCy8MzVtBRv8+jr5dU01qgL8aaKlL1+Dg1aYEIoou4Z90mTGMTljKR2RSkbmA2MdBn3
 Vp2w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=erM6d71aChyl+Iyy/eqYauRUQ2nKHoueD7cmlIRiQZ8=;
 b=nVmLBijB/AfIxXC8lij9QwaQRUdyTsiyJdN66pQBK3o+xuO8brCnwHDLP0r5iIvr5A
 MYPqZLUAjPYQQkOXZj4rvR4Ol6ys1ndfJp3me5/nxQqn8rkBJI/Y+pAghzE5z3JR3Hb/
 P7ioJHyoltHKzZZz5AJMjYMYKF/se5VTG1Q+JwVV7Nc6ARGDs1qEzni+9h4nRpd0d3a1
 /RlF9/INQEv9FJVJRcmj9XHcNQqPn9Xp/yzRhHn9XpxM00ZP4a3/yqbZpWq8RfYkMzEs
 z5fuqchHqPRJEtVXAjJOnb7JLKUTM6irTJ00G4k3TlrCAJmxYgu/bPvr3kcfv4iti5u5
 ihRg==
X-Gm-Message-State: APjAAAX4ojWogPoWq0VBPa572P42Ci0Lhst6Y2W6dvoR1jcUo1As+8Ql
 HjHRrMnDUfuGwc8riZO3ZWc=
X-Google-Smtp-Source: 
 APXvYqzhAaNc1KaAVPMCpP/YKiDq4gEpDCjaNfnx+VL50LxQ1xgj3PKgBe8srCe5bCOuxpxnMq3tKg==
X-Received: by 2002:a5d:4707:: with SMTP id y7mr4235805wrq.227.1559949077999;
 Fri, 07 Jun 2019 16:11:17 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.17
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:17 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 09/13] arm64: dts: allwinner: a64: Enable IR on Orange Pi
 Win
Date: Sat,  8 Jun 2019 01:10:56 +0200
Message-Id: <20190607231100.5894-10-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161119_797583_FC98E065 
X-CRM114-Status: GOOD (  11.06  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Jernej Skrabec <jernej.skrabec@siol.net>,
 Sean Young <sean@mess.org>, linux-kernel@vger.kernel.org,
 linux-sunxi@googlegroups.com,
 =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

From: Jernej Skrabec <jernej.skrabec@siol.net>

OrangePi Win board contains IR receiver. Enable it.

Signed-off-by: Jernej Skrabec <jernej.skrabec@siol.net>
Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm64/boot/dts/allwinner/sun50i-a64-orangepi-win.dts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-a64-orangepi-win.dts b/arch/arm64/boot/dts/allwinner/sun50i-a64-orangepi-win.dts
index 510f661229dc..e05191b71adf 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-a64-orangepi-win.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-a64-orangepi-win.dts
@@ -180,6 +180,10 @@
 	status = "okay";
 };
 
+&r_ir {
+	status = "okay";
+};
+
 &r_rsb {
 	status = "okay";
 

From patchwork Fri Jun  7 23:10:57 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982953
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id A3FCD15E6
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:33 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 8F58E28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:33 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 8187728BED; Fri,  7 Jun 2019 23:14:33 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 3B14028AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:33 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=3Nmhwb6K1L+1nNaMxD3VxAhfeLw9Wo5ZJGavVENkf0g=; b=nAmC5/B9nzGaiV
	1ke3JvtpnkSoSNdesIkqcyjavmETvuOU+b1OPDjrwvNXnh4amtj3kUE0UHJFS9fxaXsEOG+tXKO1r
	tcRUsFKsSLK/hEBzu7rK1mH5sYyZ9WqEqT5nxjDT8jEy8W6Wmn406TIhg0s9uHAmctiaPgA0KqrDD
	Bc38AX9alfpy2IfHW3kVqA2ejXgC+5cQz0gkLdhAGZRSRpnw0iIg2+pEf8dRnlqnD/qlIGro0yNnO
	Ocgub/bMPHPou445IisGram3q1tzvm5Ji1moXBWdGgaCfxEaurZ67VzT5JOGaA78bvbpyCZ/KI8kN
	M2aD7e9MqsaZy54zKvEQ==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO43-0003rg-Bc; Fri, 07 Jun 2019 23:14:27 +0000
Received: from mail-wm1-x344.google.com ([2a00:1450:4864:20::344])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO12-00013w-Rt
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:22 +0000
Received: by mail-wm1-x344.google.com with SMTP id f10so3503505wmb.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=PqR/4nQ0kMEXVQlzSnSXdJ4vrq0kGPr980mhH5i0djg=;
 b=sybVLoJiDJnW343uwPnsM5S0HNjMSLDL48ncmZRtj7mgfrBAr3I0s4Hs0qLIJPzFww
 /4xhK8BD+hIPhr4i0Fv5ybyRCGXQesuCl6NKAiI1BCD4B2hq+fc6tud+WvAoLwitIrdP
 tabsUlT1/0VQQu1XwWxGPdeaxzH4nXCBg48RUWfCBFpCcYNvEY2aSq2oIN0kU2YX/3Q/
 gEr/xVMF/Tmqju9DJAXw3QdP9o85u7cIdhsG/yAdU8F8CJ8ehvhg0VYhZEL8ZbwmX1kE
 O3HxxS93luXNkfMiRqX3X8Iwx+wC9ZFck1P9WiEjMLjkok7zXoo+xG5vRhev6XxbTnF4
 Ez+Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=PqR/4nQ0kMEXVQlzSnSXdJ4vrq0kGPr980mhH5i0djg=;
 b=k0OS6psrzvtorwES6vClEcdClAl4f9WsPfx7N+kuwhYV23vLlrOXCFofcckALnsO3M
 B5Ln6E1fQFDMzZ1RtWjyKfC4HrUs8V6wF4cGAzYHFWp+S9oPEe0YsHceSMF7JmdAMx1p
 1XPLdbnGJN4/1wPPfj+pKx4eHpyOfHjqQmvn9QahR8taT0vCXP4HNtisIGDkJ/kcLUM1
 iYLl+8BToUWCa0nuQH4E+R1ocMQ8rYJ2lF22ChBjCBA8uQQGgcbgV9QHZHz5hR8cCFqg
 p6GqWV8fOgF2QWnM8L+axQnVrPvISltR2E/6fR4F9DIan8aVd3I95K0G+khca9Mny3J4
 Z/Sw==
X-Gm-Message-State: APjAAAUU9xFQmXlvGUFrIAjHrEJ/neIZVcheL4FovF834Sb4BUbkRlad
 m0xy8GrFyaKZiDBTI0kycIQ=
X-Google-Smtp-Source: 
 APXvYqzCKM/QhWEqfR073eumDXe5BXIfBA3ismSGYlRmD88R5qIgkreKWQ2hlT9fpfbTa8GVbAMSWw==
X-Received: by 2002:a1c:6c08:: with SMTP id h8mr5514087wmc.62.1559949078962;
 Fri, 07 Jun 2019 16:11:18 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.18
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:18 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 10/13] dt-bindings: media: sunxi-ir: Add H6 compatible
Date: Sat,  8 Jun 2019 01:10:57 +0200
Message-Id: <20190607231100.5894-11-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161120_917136_FC3325E9 
X-CRM114-Status: GOOD (  11.52  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

There are some minor differences between A31 or A64 with H6 IR peripheral.

But A31 IR driver is compatible with H6.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
Reviewed-by: Rob Herring <robh@kernel.org>
---
 Documentation/devicetree/bindings/media/sunxi-ir.txt | 1 +
 1 file changed, 1 insertion(+)

diff --git a/Documentation/devicetree/bindings/media/sunxi-ir.txt b/Documentation/devicetree/bindings/media/sunxi-ir.txt
index 1dd287a4ab3a..81eaf95fb764 100644
--- a/Documentation/devicetree/bindings/media/sunxi-ir.txt
+++ b/Documentation/devicetree/bindings/media/sunxi-ir.txt
@@ -6,6 +6,7 @@ Required properties:
 	"allwinner,sun5i-a13-ir"
 	"allwinner,sun6i-a31-ir"
 	"allwinner,sun50i-a64-ir", "allwinner,sun6i-a31-ir"
+	"allwinner,sun50i-h6-ir", "allwinner,sun6i-a31-ir"
 - clocks	    : list of clock specifiers, corresponding to
 		      entries in clock-names property;
 - clock-names	    : should contain "apb" and "ir" entries;

From patchwork Fri Jun  7 23:10:58 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982951
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id BC60D76
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:14 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id A687C28AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:14 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 991E928BED; Fri,  7 Jun 2019 23:14:14 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 36F9128AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:14 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=6JobBnKSzpWQSIIMSJHP9Loi8vDb/B/c9QhTIA+DEg4=; b=Qnde3V3m3Kt7Vn
	9DYdfMSsVXcL9mCrTk/5Csasy+7S2j8SQ5/24Yzsc2hZiG7c7GQ1QOTjqaScuSpXoHkHEMCXG3Zxe
	x9JoSX6Xn/OxdwOuJ5UXuq6OTEnzF7Fcz8XL54xDf2dUN45zZrpGFov9Fek3Hy+5Q7h9OvB51yHkq
	qC9cCt890lyeiDxKBPXrJE4yvTyhOOuJsHaCW7LRAl659kn66RC4HjM7v4JSGxMGScaf8Sr6Ui3ML
	WGV0elREWBq3ZTzlhUk8SyqA3sNt1RvkfP4mhQm3XDs6kuqVMVzy98+iBUBmnrs2pTPAExt530lYD
	BEXHbB4RkCaDJ6/QyrAg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO3k-0003bt-Q2; Fri, 07 Jun 2019 23:14:08 +0000
Received: from mail-wm1-x343.google.com ([2a00:1450:4864:20::343])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO13-00015h-E9
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:23 +0000
Received: by mail-wm1-x343.google.com with SMTP id u8so3304416wmm.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=njnjG6a7jdrYLSKYX++HVTkLLSLz4gvoHp7YU4YYSHc=;
 b=rloz6Cds/NcMZNyX5rYQjfALN+w2sD5cwdqhllPoUbXBmo8udxJ0GPHIGW9k93s5Zy
 IaGyx6fa4lOL0OtqX1KdDOP0m4A/Stjp7v3fKISOW9c9HR7JFDMdVV9gyavmg5XydFjy
 1Q5C/XfWld69ItuWgeM7X8Csi5s42hghY7NRTi81LMy7+cIVJNkguVaQwSTU7tPEFOnt
 m80h0avgOSIZHmo8IDE5n5ENCEzrhfQHQzF+bmXv1popmBa17bFYDVJat//VcrWLkJPt
 haGZHYjeygHbonGEmu/0f5VyCQ0mXQeYpR2wYujWxyoryzhertqqaKpFMonDIyBDzVOK
 3KBg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=njnjG6a7jdrYLSKYX++HVTkLLSLz4gvoHp7YU4YYSHc=;
 b=nuwCMMTWdYfLepKsBXo22aVZB0MVNwJKWy5j9VVsaCTJhR0tlorpGvNfsp8eUeHcu3
 pz0Wv92kPTzJEqUS3xFar3wQyTQTcp8TF4bC+qzm0CJG/EV9YRJCEnoglsWE6Y1WbAc3
 Yb3mqKESksVKCIwMJ4maelFFU94XQKRllmynL04jVq1UYWfbp9uapiZSE7+s871JK2JF
 Rwax7HNhXtnHaEfqGp4ygFVcorPc/Cc2t9Q8Rs6nOIe6uiWex/aOZ263YbbqSy8y+fmB
 KBkaeRBpuoLBMvoYVQJJ6fbJ9u3P4yba9gxq+Ou3Db0yQDAl5isT6eisR+mnYDwPWWKz
 /P+Q==
X-Gm-Message-State: APjAAAVuESqEQFW8mnWknjP2O+2me8mBfDwAoXCJV2bCVVr5TdeAAFb9
 yaJg4V3NLPbIcCKjMLRjMXKo4DPr4GY=
X-Google-Smtp-Source: 
 APXvYqzEr1O0RpYAA6xX7b1pY4WlGx9jKDwzLXPofzg39mkwMlQpXn6zyw+shISAW27y3Y6h+x5pVA==
X-Received: by 2002:a7b:cb55:: with SMTP id v21mr5134238wmj.157.1559949080086;
 Fri, 07 Jun 2019 16:11:20 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.18
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:19 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 11/13] arm64: dts: allwinner: h6: Add IR receiver node
Date: Sat,  8 Jun 2019 01:10:58 +0200
Message-Id: <20190607231100.5894-12-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161121_665598_D4B18C09 
X-CRM114-Status: GOOD (  11.70  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Allwinner H6 IR is similar to A31 and can use same driver.

Add support for it.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
index 16c5c3d0fd81..649cbdfe452e 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
@@ -647,6 +647,25 @@
 				pins = "PL0", "PL1";
 				function = "s_i2c";
 			};
+
+			r_ir_rx_pin: r-ir-rx-pin {
+				pins = "PL9";
+				function = "s_cir_rx";
+			};
+		};
+
+		r_ir: ir@7040000 {
+				compatible = "allwinner,sun50i-h6-ir",
+					     "allwinner,sun6i-a31-ir";
+				reg = <0x07040000 0x400>;
+				interrupts = <GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>;
+				clocks = <&r_ccu CLK_R_APB1_IR>,
+					 <&r_ccu CLK_IR>;
+				clock-names = "apb", "ir";
+				resets = <&r_ccu RST_R_APB1_IR>;
+				pinctrl-names = "default";
+				pinctrl-0 = <&r_ir_rx_pin>;
+				status = "disabled";
 		};
 
 		r_i2c: i2c@7081400 {

From patchwork Fri Jun  7 23:10:59 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982955
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 35A2315E6
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:48 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 1E87928AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:48 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 0E7AF28BED; Fri,  7 Jun 2019 23:14:48 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 7F52028AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:14:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=N9w5sqCiSjtHkkNwK5TMofaW4TLXqARuCL5/OStMTqM=; b=aJ2HSqKIa2mWZv
	J6425WFSQHEWnanlZSpyCxlE6c+KSyDwu5SAnXggTaAMUy23WpRDkriiHEWHyuCmGheZOh6KhHGAg
	Apim0khb+aqRsG8RA3B79hQxoddD39aUhQEYMDifKu3x+iXKefyh3a1wHMehSrEsTJYts9wORcQaf
	NJrB9rt6MtmBEOlKZohWsFOZZqPRex+S7LanN+U9UwpyHv56IjSDcDDoga9d/KN5QiyIe3oiKAx/U
	ln5k1heWX2WCXBMGQ2FypYKMoh9P0QgYIVPTcursqFC5RY303ZK3Zn77/C6kauf1nYEfjw1Qq2ng+
	8ydmndhIWDwSirBKHnTg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO4H-00048K-BY; Fri, 07 Jun 2019 23:14:41 +0000
Received: from mail-wm1-x343.google.com ([2a00:1450:4864:20::343])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO14-00017C-OI
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:24 +0000
Received: by mail-wm1-x343.google.com with SMTP id h19so5017776wme.0
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=R6G/HHE3Lw7PsZVrg7cAYjp5rZiFrvQ8UHmrA7ixhEk=;
 b=ahFwOO/zCB7KOdKWJkSz8CtMTvqrKkophCTnEGGeQ3xtTYARUUadbs7ZImeIqQKw8D
 eysDByIUFGrTW6+i5dMZI8Vo1N8mgfKsXFoEIu056VxfQD89aO3IxbFgKHSjYvwYKJjm
 Dowd90UptEAKFpPe22Q7DaEst3SS4OW+1vdbtAWWBLQPeME6eDRwauspq0o1c29s/JpL
 DV5RtsXt6vWGRJmbUPdFm9DUVV3zA/TjZg7IW+Q38Zfo9Iier2NQgIoYf9S/3KIYymFZ
 7gqQGRg9SUXxueVQ/nbYQJHXwblNY79IZV/66Z/70fbYH7Xu1X5q+AvVh6kOeKcDmV6m
 CZpQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=R6G/HHE3Lw7PsZVrg7cAYjp5rZiFrvQ8UHmrA7ixhEk=;
 b=nZ5t1gr0jXrByVrke55Y0uVWFmPMasrf6vn9V119Ek6lZsta5oIefAIgPM4lys8mrv
 JUsFqv4i3g5Q3jVlFef1+NqKifgZ7vCkS97R9mZUfcbNDj2fhvA683pTcXYEaKxBm8qr
 hPMM/UC5rH6KittOHHZd+TTJZgLpGyTCdk3ZiBDh7oNI//Td4QcHIcuoEFWSk2cEZkCU
 3fuvIlen8X9mSVDrhqEpF5zBFXZE4Y2WqowzsoCOIAqjd79Vdbjqo8Bjr12qRsbIm/Rk
 NF0DrwFDTxVJS0IU1zLKiZ56KAK17MpKBDg1PGJQxR5BO3finqg5NzrxHJY5K8HvnJUx
 opYg==
X-Gm-Message-State: APjAAAXoKPQ3xi7A1YMXd5MS4eWR/zPmLvY38bLugaHQdGxeXJnpDYyi
 RJqYU8m9+JIlzhmrsAvyNN+CEOIsT4k=
X-Google-Smtp-Source: 
 APXvYqz5cDn7B2m4gq6V884tmFOzN3LBGdwFpLdbmiMpU4EIhb2xdLK3DyIN3eLohT14DTmzY2Ds7g==
X-Received: by 2002:a05:600c:2507:: with SMTP id
 d7mr5078640wma.2.1559949081423;
 Fri, 07 Jun 2019 16:11:21 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.20
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:20 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 12/13] arm64: dts: allwinner: h6: Enable IR on H6 boards
Date: Sat,  8 Jun 2019 01:10:59 +0200
Message-Id: <20190607231100.5894-13-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161123_043987_BCD99E93 
X-CRM114-Status: GOOD (  11.94  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 linux-sunxi@googlegroups.com,
 =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Beelink GS1, OrangePi H6 boards and Pine H64 have an IR receiver.

Enable it in their device-tree.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
---
 arch/arm64/boot/dts/allwinner/sun50i-h6-beelink-gs1.dts | 4 ++++
 arch/arm64/boot/dts/allwinner/sun50i-h6-orangepi.dtsi   | 4 ++++
 arch/arm64/boot/dts/allwinner/sun50i-h6-pine-h64.dts    | 4 ++++
 3 files changed, 12 insertions(+)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h6-beelink-gs1.dts b/arch/arm64/boot/dts/allwinner/sun50i-h6-beelink-gs1.dts
index 0dc33c90dd60..680dc29cb089 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h6-beelink-gs1.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h6-beelink-gs1.dts
@@ -232,6 +232,10 @@
 	};
 };
 
+&r_ir {
+	status = "okay";
+};
+
 &r_pio {
 	/*
 	 * PL0 and PL1 are used for PMIC I2C
diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h6-orangepi.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-h6-orangepi.dtsi
index 62e27948a3fa..ec9b6a578e3f 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h6-orangepi.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h6-orangepi.dtsi
@@ -189,6 +189,10 @@
 	};
 };
 
+&r_ir {
+	status = "okay";
+};
+
 &uart0 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&uart0_ph_pins>;
diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h6-pine-h64.dts b/arch/arm64/boot/dts/allwinner/sun50i-h6-pine-h64.dts
index 4802902e128f..ae12ee4fcc77 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h6-pine-h64.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h6-pine-h64.dts
@@ -247,6 +247,10 @@
 	};
 };
 
+&r_ir {
+	status = "okay";
+};
+
 &uart0 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&uart0_ph_pins>;

From patchwork Fri Jun  7 23:11:00 2019
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
X-Patchwork-Submitter: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
X-Patchwork-Id: 10982957
Return-Path: 
 <linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org>
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
 [172.30.200.125])
	by pdx-korg-patchwork-2.web.codeaurora.org (Postfix) with ESMTP id 892A713AD
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:15:12 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 718D128AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:15:12 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 62EE728BED; Fri,  7 Jun 2019 23:15:12 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No,
 score=-5.2 required=2.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	DKIM_SIGNED,DKIM_VALID,FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
	(using TLSv1.2 with cipher AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by mail.wl.linuxfoundation.org (Postfix) with ESMTPS id 197A728AA0
	for <patchwork-linux-arm@patchwork.kernel.org>;
 Fri,  7 Jun 2019 23:15:12 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=wpGm7uP1Z74Fw2fCp8cpdtI/fIYo6P9eMps8cHuEk5o=; b=EAqg9MOnlEkqZn
	8oe8p6FetypSFi9mOKiMbixsuKr8WNDliSf8TLiVU8jdIc9p4QwiH+qvB4zK5OE58dXQo2gFyKaVD
	SphsBjcYZhHLm/bfGWOAl9nk7CPPOPUoiPJgWzWzyDdh/QrxWv/J6TuasBd3Kh3/tfcZ9kYPWzg7j
	KuY6e3DwZjHXXblPEM5+1fuwGb/WacMGum6fhb27k0lvYba4UhA4DkRt9euaspNhGY0Vk/ZLzZCb7
	H0FfuIuEFaTCEmBRw3hYpXtvgQYrxJLP5fcrJFDLxSxMRzlDSCLHXziuqfs9Hy5z5r0Uzm5T9worG
	SNN/5RHQ05L0zjQWaWFg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hZO4d-0004Ya-1q; Fri, 07 Jun 2019 23:15:03 +0000
Received: from mail-wm1-x342.google.com ([2a00:1450:4864:20::342])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1hZO15-000183-Pq
 for linux-arm-kernel@lists.infradead.org; Fri, 07 Jun 2019 23:11:25 +0000
Received: by mail-wm1-x342.google.com with SMTP id u8so3304463wmm.1
 for <linux-arm-kernel@lists.infradead.org>;
 Fri, 07 Jun 2019 16:11:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=ZFHFRMwqhia+MVch9pKGgEBNeKukD3ZLzLQ+6+PB9fg=;
 b=eiLeaHHak8jYQRZKjm/x1H8ej+KxQ2LjmoNyoxAAGEjakKrI7elSGX0wrr60ZoO5qj
 9HU+8ZIVn3pNJvvh82yUhGxMElRvn7NJ7FPjqlXS7tS+rmnFy7UyH2NsO8qQY2GvvwTA
 +Ks0iEPXlNlJy77jrZZ/TfqHLkhTrrBApCZj5lQzYAP9CfjT9ks1SOToNaHh+UrAgrne
 B9+/uz12mb0rkzFBGXjZ23XnsQ/cnjjPyPzSMzCwKImGOrW4pZz69r0+QX1orVmhFcu8
 dLfDhGHEnCL7q1FgbuP6sJYZnK9iZghCczKyDY70qnQ73o4xwyKnIwdcEF1luofmnTZK
 kKyg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=ZFHFRMwqhia+MVch9pKGgEBNeKukD3ZLzLQ+6+PB9fg=;
 b=mNTKS0qcUKGdtP4Vn9J5sU2WWbyZ6swSPBpMa3HGDaPgx24L+LSELlN1O7dM3uT+F1
 7cdxVeJHvUVENyoAFiijnFpVKjMmWhMOnOjRs0wZxe7/vw02tSF1Fny+rFjd6vnuZk5L
 ceZqDSVJ2o5W0Pj/5hRprS6d2qlrEGq5m6aC73+naOfXyiul/Dj+LMBOCPa86ALEF1sv
 G3JnxSOhVtq00I6BWV575pHdaqKBBWCmR6iJjTEirwM6z9ehx2oMC+BkWVl6mzagzWbS
 Y8mbtIf9k9pJRbEsE9bYblRye7CKk/8HxXdOF87J4wKaqX60Suk/BLUYeRa68+29ZVyQ
 vwnA==
X-Gm-Message-State: APjAAAX6yVsNhVPiUJq5jkICrY/joLaB/F2yI1sCTqz6Ej4tnmnnNBS/
 hwKAjMws9JRQHJm33MCGqvY=
X-Google-Smtp-Source: 
 APXvYqwddSzhdksmvNkBbueAxfPvGpAbf9YR3GwvhZyX9J61/5+7yOtpn8VduLAqIR6fHtcd7KNeQQ==
X-Received: by 2002:a7b:c018:: with SMTP id c24mr3051220wmb.37.1559949082496;
 Fri, 07 Jun 2019 16:11:22 -0700 (PDT)
Received: from localhost.localdomain ([2a01:e0a:1f1:d0f0::4e2b:d7ca])
 by smtp.gmail.com with ESMTPSA id h84sm4108559wmf.43.2019.06.07.16.11.21
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 07 Jun 2019 16:11:21 -0700 (PDT)
From: =?utf-8?b?Q2zDqW1lbnQgUMOpcm9u?= <peron.clem@gmail.com>
To: Mauro Carvalho Chehab <mchehab@kernel.org>,
 Rob Herring <robh+dt@kernel.org>, Mark Rutland <mark.rutland@arm.com>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>
Subject: [PATCH v5 13/13] arm64: defconfig: Enable IR SUNXI option
Date: Sat,  8 Jun 2019 01:11:00 +0200
Message-Id: <20190607231100.5894-14-peron.clem@gmail.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190607231100.5894-1-peron.clem@gmail.com>
References: <20190607231100.5894-1-peron.clem@gmail.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190607_161124_096680_3958A8E8 
X-CRM114-Status: GOOD (  11.04  )
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: 
 <http://lists.infradead.org/mailman/options/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: 
 <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>,
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, Sean Young <sean@mess.org>,
 linux-kernel@vger.kernel.org, linux-sunxi@googlegroups.com, =?utf-8?b?Q2w=?=
	=?utf-8?b?w6ltZW50IFDDqXJvbg==?= <peron.clem@gmail.com>,
 linux-arm-kernel@lists.infradead.org, linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: 
 linux-arm-kernel-bounces+patchwork-linux-arm=patchwork.kernel.org@lists.infradead.org
X-Virus-Scanned: ClamAV using ClamSMTP

Enable CONFIG_IR_SUNXI option for ARM64, so that Allwinner A64/H6 SoCs
can use their IR receiver controller.

Signed-off-by: Clément Péron <peron.clem@gmail.com>
Acked-by: Sean Young <sean@mess.org>
---
 arch/arm64/configs/defconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/arm64/configs/defconfig b/arch/arm64/configs/defconfig
index 4d583514258c..5128029100d2 100644
--- a/arch/arm64/configs/defconfig
+++ b/arch/arm64/configs/defconfig
@@ -460,6 +460,7 @@ CONFIG_RC_CORE=m
 CONFIG_RC_DECODERS=y
 CONFIG_RC_DEVICES=y
 CONFIG_IR_MESON=m
+CONFIG_IR_SUNXI=m
 CONFIG_MEDIA_SUPPORT=m
 CONFIG_MEDIA_CAMERA_SUPPORT=y
 CONFIG_MEDIA_ANALOG_TV_SUPPORT=y
